{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-2","version":"1.19.0","build":{"Version":"1.19.0+dev50","Commit":"7d527e90","Date":"2023-03-03"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":":9187"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":":8000"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":"localhost:8010"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0117a010-88b7-4305-92e6-66b7d25154c0","uuid":"a9c3e3cb-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0117a010-88b7-4305-92e6-66b7d25154c0","uuid":"a9c3e3cb-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0117a010-88b7-4305-92e6-66b7d25154c0","uuid":"a9c3e3cb-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:33Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0117a010-88b7-4305-92e6-66b7d25154c0","uuid":"a9c3e3cb-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:33.740 UTC [26] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_ctl","msg":"2023-03-23 07:09:33.740 UTC [26] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"2023-03-23 07:09:33.740 UTC [26] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"2023-03-23 07:09:33.740 UTC [26] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.740 UTC","process_id":"26","session_id":"641bfb2d.1a","session_line_num":"1","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.740 UTC","process_id":"26","session_id":"641bfb2d.1a","session_line_num":"2","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.741 UTC","process_id":"26","session_id":"641bfb2d.1a","session_line_num":"3","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.741 UTC","process_id":"26","session_id":"641bfb2d.1a","session_line_num":"4","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.747 UTC","process_id":"26","session_id":"641bfb2d.1a","session_line_num":"5","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.754 UTC","process_id":"30","session_id":"641bfb2d.1e","session_line_num":"1","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.754 UTC","process_id":"30","session_id":"641bfb2d.1e","session_line_num":"2","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.754 UTC","process_id":"30","session_id":"641bfb2d.1e","session_line_num":"3","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.845 UTC","process_id":"26","session_id":"641bfb2d.1a","session_line_num":"6","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 30) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.845 UTC","process_id":"26","session_id":"641bfb2d.1a","session_line_num":"7","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:33.845 UTC","process_id":"26","session_id":"641bfb2d.1a","session_line_num":"8","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:33Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0117a010-88b7-4305-92e6-66b7d25154c0","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d3bb506c-e7e1-42a1-9a0b-b4f11f673e37","uuid":"a9ef3211-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d3bb506c-e7e1-42a1-9a0b-b4f11f673e37","uuid":"a9ef3211-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d3bb506c-e7e1-42a1-9a0b-b4f11f673e37","uuid":"a9ef3211-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:33Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d3bb506c-e7e1-42a1-9a0b-b4f11f673e37","uuid":"a9ef3211-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:33Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:34.009 UTC [41] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"2023-03-23 07:09:34.009 UTC [41] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"2023-03-23 07:09:34.009 UTC [41] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"2023-03-23 07:09:34.009 UTC [41] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.009 UTC","process_id":"41","session_id":"641bfb2d.29","session_line_num":"1","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.009 UTC","process_id":"41","session_id":"641bfb2d.29","session_line_num":"2","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.010 UTC","process_id":"41","session_id":"641bfb2d.29","session_line_num":"3","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.010 UTC","process_id":"41","session_id":"641bfb2d.29","session_line_num":"4","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.014 UTC","process_id":"41","session_id":"641bfb2d.29","session_line_num":"5","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.020 UTC","process_id":"45","session_id":"641bfb2e.2d","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.021 UTC","process_id":"45","session_id":"641bfb2e.2d","session_line_num":"2","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.021 UTC","process_id":"45","session_id":"641bfb2e.2d","session_line_num":"3","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.114 UTC","process_id":"41","session_id":"641bfb2d.29","session_line_num":"6","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 45) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.114 UTC","process_id":"41","session_id":"641bfb2d.29","session_line_num":"7","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.115 UTC","process_id":"41","session_id":"641bfb2d.29","session_line_num":"8","session_start_time":"2023-03-23 07:09:33 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:34Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d3bb506c-e7e1-42a1-9a0b-b4f11f673e37","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"380613f7-8d85-4f19-88bb-75e0ea5bbe6f","uuid":"aa1a1c35-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"380613f7-8d85-4f19-88bb-75e0ea5bbe6f","uuid":"aa1a1c35-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"380613f7-8d85-4f19-88bb-75e0ea5bbe6f","uuid":"aa1a1c35-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:34Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"380613f7-8d85-4f19-88bb-75e0ea5bbe6f","uuid":"aa1a1c35-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:34.299 UTC [55] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"2023-03-23 07:09:34.299 UTC [55] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"2023-03-23 07:09:34.299 UTC [55] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"2023-03-23 07:09:34.299 UTC [55] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.299 UTC","process_id":"55","session_id":"641bfb2e.37","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.299 UTC","process_id":"55","session_id":"641bfb2e.37","session_line_num":"2","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.299 UTC","process_id":"55","session_id":"641bfb2e.37","session_line_num":"3","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.299 UTC","process_id":"55","session_id":"641bfb2e.37","session_line_num":"4","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.306 UTC","process_id":"55","session_id":"641bfb2e.37","session_line_num":"5","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.313 UTC","process_id":"59","session_id":"641bfb2e.3b","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.313 UTC","process_id":"59","session_id":"641bfb2e.3b","session_line_num":"2","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.313 UTC","process_id":"59","session_id":"641bfb2e.3b","session_line_num":"3","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.406 UTC","process_id":"55","session_id":"641bfb2e.37","session_line_num":"6","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 59) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.406 UTC","process_id":"55","session_id":"641bfb2e.37","session_line_num":"7","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.407 UTC","process_id":"55","session_id":"641bfb2e.37","session_line_num":"8","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:34Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"380613f7-8d85-4f19-88bb-75e0ea5bbe6f","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bab824a1-d498-4b87-ab10-62ef34a27722","uuid":"aa47a70e-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bab824a1-d498-4b87-ab10-62ef34a27722","uuid":"aa47a70e-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bab824a1-d498-4b87-ab10-62ef34a27722","uuid":"aa47a70e-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:34Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bab824a1-d498-4b87-ab10-62ef34a27722","uuid":"aa47a70e-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:34.609 UTC [69] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"2023-03-23 07:09:34.609 UTC [69] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"2023-03-23 07:09:34.609 UTC [69] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"2023-03-23 07:09:34.609 UTC [69] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.609 UTC","process_id":"69","session_id":"641bfb2e.45","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.609 UTC","process_id":"69","session_id":"641bfb2e.45","session_line_num":"2","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.610 UTC","process_id":"69","session_id":"641bfb2e.45","session_line_num":"3","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.610 UTC","process_id":"69","session_id":"641bfb2e.45","session_line_num":"4","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.617 UTC","process_id":"69","session_id":"641bfb2e.45","session_line_num":"5","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.627 UTC","process_id":"74","session_id":"641bfb2e.4a","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.627 UTC","process_id":"74","session_id":"641bfb2e.4a","session_line_num":"2","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.627 UTC","process_id":"74","session_id":"641bfb2e.4a","session_line_num":"3","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.672 UTC","user_name":"postgres","database_name":"postgres","process_id":"75","connection_from":"[local]","session_id":"641bfb2e.4b","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is starting up","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.725 UTC","process_id":"69","session_id":"641bfb2e.45","session_line_num":"6","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 74) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.725 UTC","process_id":"69","session_id":"641bfb2e.45","session_line_num":"7","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.726 UTC","process_id":"69","session_id":"641bfb2e.45","session_line_num":"8","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:34Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bab824a1-d498-4b87-ab10-62ef34a27722","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3da25883-5874-40d0-b59e-dd7c138433f1","uuid":"aa79ef6d-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3da25883-5874-40d0-b59e-dd7c138433f1","uuid":"aa79ef6d-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3da25883-5874-40d0-b59e-dd7c138433f1","uuid":"aa79ef6d-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:34Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3da25883-5874-40d0-b59e-dd7c138433f1","uuid":"aa79ef6d-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:34.918 UTC [85] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"pg_ctl","msg":"2023-03-23 07:09:34.918 UTC [85] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.918 UTC","process_id":"85","session_id":"641bfb2e.55","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.918 UTC","process_id":"85","session_id":"641bfb2e.55","session_line_num":"2","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"2023-03-23 07:09:34.918 UTC [85] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"2023-03-23 07:09:34.918 UTC [85] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.919 UTC","process_id":"85","session_id":"641bfb2e.55","session_line_num":"3","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.919 UTC","process_id":"85","session_id":"641bfb2e.55","session_line_num":"4","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.924 UTC","process_id":"85","session_id":"641bfb2e.55","session_line_num":"5","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.930 UTC","process_id":"89","session_id":"641bfb2e.59","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.931 UTC","process_id":"89","session_id":"641bfb2e.59","session_line_num":"2","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.931 UTC","process_id":"89","session_id":"641bfb2e.59","session_line_num":"3","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T07:09:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:34.949 UTC","user_name":"postgres","database_name":"postgres","process_id":"90","connection_from":"[local]","session_id":"641bfb2e.5a","session_line_num":"1","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is starting up","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.026 UTC","process_id":"85","session_id":"641bfb2e.55","session_line_num":"6","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 89) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.026 UTC","process_id":"85","session_id":"641bfb2e.55","session_line_num":"7","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.027 UTC","process_id":"85","session_id":"641bfb2e.55","session_line_num":"8","session_start_time":"2023-03-23 07:09:34 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:35Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3da25883-5874-40d0-b59e-dd7c138433f1","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b4198d45-e473-46c4-aa63-b91838d48d8b","uuid":"aaaf0589-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b4198d45-e473-46c4-aa63-b91838d48d8b","uuid":"aaaf0589-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b4198d45-e473-46c4-aa63-b91838d48d8b","uuid":"aaaf0589-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:35Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b4198d45-e473-46c4-aa63-b91838d48d8b","uuid":"aaaf0589-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:35.275 UTC [100] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"2023-03-23 07:09:35.275 UTC [100] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"2023-03-23 07:09:35.275 UTC [100] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"2023-03-23 07:09:35.275 UTC [100] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.275 UTC","process_id":"100","session_id":"641bfb2f.64","session_line_num":"1","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.275 UTC","process_id":"100","session_id":"641bfb2f.64","session_line_num":"2","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.275 UTC","process_id":"100","session_id":"641bfb2f.64","session_line_num":"3","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.275 UTC","process_id":"100","session_id":"641bfb2f.64","session_line_num":"4","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.290 UTC","process_id":"100","session_id":"641bfb2f.64","session_line_num":"5","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.307 UTC","process_id":"104","session_id":"641bfb2f.68","session_line_num":"1","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.307 UTC","process_id":"104","session_id":"641bfb2f.68","session_line_num":"2","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.307 UTC","process_id":"104","session_id":"641bfb2f.68","session_line_num":"3","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.403 UTC","process_id":"100","session_id":"641bfb2f.64","session_line_num":"6","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 104) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.403 UTC","process_id":"100","session_id":"641bfb2f.64","session_line_num":"7","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.404 UTC","process_id":"100","session_id":"641bfb2f.64","session_line_num":"8","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:35Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b4198d45-e473-46c4-aa63-b91838d48d8b","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e58a409-ee16-4f11-b0b0-5b70dbb61bfc","uuid":"aaf18260-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e58a409-ee16-4f11-b0b0-5b70dbb61bfc","uuid":"aaf18260-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e58a409-ee16-4f11-b0b0-5b70dbb61bfc","uuid":"aaf18260-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:35Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e58a409-ee16-4f11-b0b0-5b70dbb61bfc","uuid":"aaf18260-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:35.722 UTC [114] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"2023-03-23 07:09:35.722 UTC [114] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"2023-03-23 07:09:35.722 UTC [114] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"2023-03-23 07:09:35.722 UTC [114] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.722 UTC","process_id":"114","session_id":"641bfb2f.72","session_line_num":"1","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.722 UTC","process_id":"114","session_id":"641bfb2f.72","session_line_num":"2","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.723 UTC","process_id":"114","session_id":"641bfb2f.72","session_line_num":"3","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.723 UTC","process_id":"114","session_id":"641bfb2f.72","session_line_num":"4","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.728 UTC","process_id":"114","session_id":"641bfb2f.72","session_line_num":"5","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.735 UTC","process_id":"118","session_id":"641bfb2f.76","session_line_num":"1","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.736 UTC","process_id":"118","session_id":"641bfb2f.76","session_line_num":"2","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.736 UTC","process_id":"118","session_id":"641bfb2f.76","session_line_num":"3","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.827 UTC","process_id":"114","session_id":"641bfb2f.72","session_line_num":"6","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 118) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.827 UTC","process_id":"114","session_id":"641bfb2f.72","session_line_num":"7","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:35.828 UTC","process_id":"114","session_id":"641bfb2f.72","session_line_num":"8","session_start_time":"2023-03-23 07:09:35 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:35Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:35Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e58a409-ee16-4f11-b0b0-5b70dbb61bfc","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5ee6c27c-4983-4e1c-ab8a-01a2868989f8","uuid":"ab4e7144-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5ee6c27c-4983-4e1c-ab8a-01a2868989f8","uuid":"ab4e7144-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5ee6c27c-4983-4e1c-ab8a-01a2868989f8","uuid":"ab4e7144-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:36Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5ee6c27c-4983-4e1c-ab8a-01a2868989f8","uuid":"ab4e7144-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:36.317 UTC [128] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"pg_ctl","msg":"2023-03-23 07:09:36.317 UTC [128] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"2023-03-23 07:09:36.317 UTC [128] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"2023-03-23 07:09:36.317 UTC [128] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.317 UTC","process_id":"128","session_id":"641bfb30.80","session_line_num":"1","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.317 UTC","process_id":"128","session_id":"641bfb30.80","session_line_num":"2","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.317 UTC","process_id":"128","session_id":"641bfb30.80","session_line_num":"3","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.317 UTC","process_id":"128","session_id":"641bfb30.80","session_line_num":"4","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.325 UTC","process_id":"128","session_id":"641bfb30.80","session_line_num":"5","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.332 UTC","process_id":"132","session_id":"641bfb30.84","session_line_num":"1","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.333 UTC","process_id":"132","session_id":"641bfb30.84","session_line_num":"2","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.333 UTC","process_id":"132","session_id":"641bfb30.84","session_line_num":"3","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.371 UTC","user_name":"postgres","database_name":"postgres","process_id":"133","connection_from":"[local]","session_id":"641bfb30.85","session_line_num":"1","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is starting up","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.386 UTC","user_name":"postgres","database_name":"postgres","process_id":"134","connection_from":"[local]","session_id":"641bfb30.86","session_line_num":"1","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is starting up","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.433 UTC","process_id":"128","session_id":"641bfb30.80","session_line_num":"6","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 132) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.433 UTC","process_id":"128","session_id":"641bfb30.80","session_line_num":"7","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:36.434 UTC","process_id":"128","session_id":"641bfb30.80","session_line_num":"8","session_start_time":"2023-03-23 07:09:36 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:36Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5ee6c27c-4983-4e1c-ab8a-01a2868989f8","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3c78f834-b7d6-40c0-b230-8b0cee9a4c5f","uuid":"abd9edcf-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3c78f834-b7d6-40c0-b230-8b0cee9a4c5f","uuid":"abd9edcf-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3c78f834-b7d6-40c0-b230-8b0cee9a4c5f","uuid":"abd9edcf-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:37Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3c78f834-b7d6-40c0-b230-8b0cee9a4c5f","uuid":"abd9edcf-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:37.235 UTC [144] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"pg_ctl","msg":"2023-03-23 07:09:37.235 UTC [144] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.235 UTC","process_id":"144","session_id":"641bfb31.90","session_line_num":"1","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.235 UTC","process_id":"144","session_id":"641bfb31.90","session_line_num":"2","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.236 UTC","process_id":"144","session_id":"641bfb31.90","session_line_num":"3","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.236 UTC","process_id":"144","session_id":"641bfb31.90","session_line_num":"4","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"2023-03-23 07:09:37.235 UTC [144] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"2023-03-23 07:09:37.235 UTC [144] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.242 UTC","process_id":"144","session_id":"641bfb31.90","session_line_num":"5","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.249 UTC","process_id":"148","session_id":"641bfb31.94","session_line_num":"1","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.249 UTC","process_id":"148","session_id":"641bfb31.94","session_line_num":"2","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.249 UTC","process_id":"148","session_id":"641bfb31.94","session_line_num":"3","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.343 UTC","process_id":"144","session_id":"641bfb31.90","session_line_num":"6","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 148) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.343 UTC","process_id":"144","session_id":"641bfb31.90","session_line_num":"7","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:37.344 UTC","process_id":"144","session_id":"641bfb31.90","session_line_num":"8","session_start_time":"2023-03-23 07:09:37 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:37Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3c78f834-b7d6-40c0-b230-8b0cee9a4c5f","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:37Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d480091-2bfe-4446-9f8f-22b2b53846b2","uuid":"acc7b4b2-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d480091-2bfe-4446-9f8f-22b2b53846b2","uuid":"acc7b4b2-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d480091-2bfe-4446-9f8f-22b2b53846b2","uuid":"acc7b4b2-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:38Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d480091-2bfe-4446-9f8f-22b2b53846b2","uuid":"acc7b4b2-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:38.780 UTC [158] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"pg_ctl","msg":"2023-03-23 07:09:38.780 UTC [158] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.780 UTC","process_id":"158","session_id":"641bfb32.9e","session_line_num":"1","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.780 UTC","process_id":"158","session_id":"641bfb32.9e","session_line_num":"2","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.780 UTC","process_id":"158","session_id":"641bfb32.9e","session_line_num":"3","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"2023-03-23 07:09:38.780 UTC [158] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"2023-03-23 07:09:38.780 UTC [158] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.780 UTC","process_id":"158","session_id":"641bfb32.9e","session_line_num":"4","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.788 UTC","process_id":"158","session_id":"641bfb32.9e","session_line_num":"5","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.795 UTC","process_id":"162","session_id":"641bfb32.a2","session_line_num":"1","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.795 UTC","process_id":"162","session_id":"641bfb32.a2","session_line_num":"2","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.795 UTC","process_id":"162","session_id":"641bfb32.a2","session_line_num":"3","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.883 UTC","process_id":"158","session_id":"641bfb32.9e","session_line_num":"6","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 162) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.883 UTC","process_id":"158","session_id":"641bfb32.9e","session_line_num":"7","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:38.884 UTC","process_id":"158","session_id":"641bfb32.9e","session_line_num":"8","session_start_time":"2023-03-23 07:09:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:38Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:38Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d480091-2bfe-4446-9f8f-22b2b53846b2","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:40Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4a6a625f-253b-4a14-a821-a4a4bae32523","uuid":"ae773189-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4a6a625f-253b-4a14-a821-a4a4bae32523","uuid":"ae773189-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4a6a625f-253b-4a14-a821-a4a4bae32523","uuid":"ae773189-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:41Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4a6a625f-253b-4a14-a821-a4a4bae32523","uuid":"ae773189-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:41.615 UTC [172] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"pg_ctl","msg":"2023-03-23 07:09:41.615 UTC [172] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"2023-03-23 07:09:41.615 UTC [172] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"2023-03-23 07:09:41.615 UTC [172] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.615 UTC","process_id":"172","session_id":"641bfb35.ac","session_line_num":"1","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.615 UTC","process_id":"172","session_id":"641bfb35.ac","session_line_num":"2","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.615 UTC","process_id":"172","session_id":"641bfb35.ac","session_line_num":"3","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.615 UTC","process_id":"172","session_id":"641bfb35.ac","session_line_num":"4","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.624 UTC","process_id":"172","session_id":"641bfb35.ac","session_line_num":"5","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.631 UTC","process_id":"176","session_id":"641bfb35.b0","session_line_num":"1","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.631 UTC","process_id":"176","session_id":"641bfb35.b0","session_line_num":"2","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.631 UTC","process_id":"176","session_id":"641bfb35.b0","session_line_num":"3","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.720 UTC","process_id":"172","session_id":"641bfb35.ac","session_line_num":"6","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 176) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.720 UTC","process_id":"172","session_id":"641bfb35.ac","session_line_num":"7","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:41.721 UTC","process_id":"172","session_id":"641bfb35.ac","session_line_num":"8","session_start_time":"2023-03-23 07:09:41 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:41Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:41Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4a6a625f-253b-4a14-a821-a4a4bae32523","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:43Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T07:09:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:45Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3f8fa08a-1aa9-4d4b-96dc-cd2c3bf6d92a","uuid":"b1ad42dc-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3f8fa08a-1aa9-4d4b-96dc-cd2c3bf6d92a","uuid":"b1ad42dc-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3f8fa08a-1aa9-4d4b-96dc-cd2c3bf6d92a","uuid":"b1ad42dc-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T07:09:46Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T07:09:46Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:46Z","logger":"pg_rewind","msg":"pg_rewind: error: could not find common ancestor of the source and target cluster's timelines","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:46Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3f8fa08a-1aa9-4d4b-96dc-cd2c3bf6d92a","uuid":"b1ad42dc-c949-11ed-be4a-02292accc86f","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:46Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 07:09:47.020 UTC [186] LOG:  redirecting log output to logging collector process","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"pg_ctl","msg":"2023-03-23 07:09:47.020 UTC [186] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.020 UTC","process_id":"186","session_id":"641bfb3a.ba","session_line_num":"1","session_start_time":"2023-03-23 07:09:46 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"2023-03-23 07:09:47.020 UTC [186] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"2023-03-23 07:09:47.020 UTC [186] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.020 UTC","process_id":"186","session_id":"641bfb3a.ba","session_line_num":"2","session_start_time":"2023-03-23 07:09:46 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.021 UTC","process_id":"186","session_id":"641bfb3a.ba","session_line_num":"3","session_start_time":"2023-03-23 07:09:46 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.021 UTC","process_id":"186","session_id":"641bfb3a.ba","session_line_num":"4","session_start_time":"2023-03-23 07:09:46 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.026 UTC","process_id":"186","session_id":"641bfb3a.ba","session_line_num":"5","session_start_time":"2023-03-23 07:09:46 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.033 UTC","process_id":"190","session_id":"641bfb3b.be","session_line_num":"1","session_start_time":"2023-03-23 07:09:47 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-22 08:19:19 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.033 UTC","process_id":"190","session_id":"641bfb3b.be","session_line_num":"2","session_start_time":"2023-03-23 07:09:47 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid primary checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.033 UTC","process_id":"190","session_id":"641bfb3b.be","session_line_num":"3","session_start_time":"2023-03-23 07:09:47 UTC","transaction_id":"0","error_severity":"PANIC","sql_state_code":"XX000","message":"could not locate a valid checkpoint record","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.122 UTC","process_id":"186","session_id":"641bfb3a.ba","session_line_num":"6","session_start_time":"2023-03-23 07:09:46 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"startup process (PID 190) was terminated by signal 6: Aborted","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.122 UTC","process_id":"186","session_id":"641bfb3a.ba","session_line_num":"7","session_start_time":"2023-03-23 07:09:46 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"aborting startup due to startup process failure","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-2","record":{"log_time":"2023-03-23 07:09:47.123 UTC","process_id":"186","session_id":"641bfb3a.ba","session_line_num":"8","session_start_time":"2023-03-23 07:09:46 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:47Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T07:09:47Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-23T07:09:47Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3f8fa08a-1aa9-4d4b-96dc-cd2c3bf6d92a","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T07:09:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:51Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:51Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:51Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:51Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:51Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:53Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T07:09:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:55Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T07:09:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
