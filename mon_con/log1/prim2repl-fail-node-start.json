{"level":"info","ts":"2023-03-24T19:15:56Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-4","version":"1.19.1","build":{"Version":"1.19.1","Commit":"cb24d237","Date":"2023-03-20"}}
{"level":"info","ts":"2023-03-24T19:15:56Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"starting the postgres loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-4"}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"starting signal loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Starting webserver","logging_pod":"cluster-example-4","address":":8000"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Starting webserver","logging_pod":"cluster-example-4","address":"localhost:8010"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Starting webserver","logging_pod":"cluster-example-4","address":":9187"}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"Checking PGDATA coherence","caller":"internal/cmd/manager/instance/run/lifecycle/run.go:255","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","filename":"/controller/certificates/server.crt","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","filename":"/controller/certificates/server.key","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","filename":"/controller/certificates/streaming_replica.crt","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","filename":"/controller/certificates/streaming_replica.key","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","filename":"/controller/certificates/client-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","filename":"/controller/certificates/server-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:15:56Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:15:56Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:15:57Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:15:58Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:15:59Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:15:59Z","logger":"pg_rewind","msg":"pg_rewind: servers diverged at WAL location 0/18000000 on timeline 6","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:15:59Z","logger":"pg_rewind","msg":"pg_rewind: rewinding from last common checkpoint at 0/17000060 on timeline 6","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:15:59Z","logger":"pg_rewind","msg":"pg_rewind: reading source file list","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:03Z","logger":"pg_rewind","msg":"pg_rewind: reading target file list","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:03Z","logger":"pg_rewind","msg":"pg_rewind: reading WAL in target","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:03Z","logger":"pg_rewind","msg":"pg_rewind: need to copy 245 MB (total source directory size is 269 MB)","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:03Z","logger":"pg_rewind","msg":"     0/250896 kB (0%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:04Z","logger":"pg_rewind","msg":"  7988/250896 kB (3%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:04Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:16:05Z","logger":"pg_rewind","msg":" 22324/250896 kB (8%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:06Z","logger":"pg_rewind","msg":" 37684/250896 kB (15%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:07Z","logger":"pg_rewind","msg":" 46900/250896 kB (18%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:08Z","logger":"pg_rewind","msg":" 52020/250896 kB (20%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:09Z","logger":"pg_rewind","msg":" 55092/250896 kB (21%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:10Z","logger":"pg_rewind","msg":" 56116/250896 kB (22%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:14Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:16:24Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:16:27Z","logger":"pg_rewind","msg":" 65332/250896 kB (26%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:30Z","logger":"pg_rewind","msg":" 74548/250896 kB (29%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:33Z","logger":"pg_rewind","msg":" 87860/250896 kB (35%) copied","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:34Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_rewind","msg":"pg_rewind: error: unexpected result while fetching remote files: server closed the connection unexpectedly","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_rewind","msg":"\tThis probably means the server terminated abnormally","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_rewind","msg":"\tbefore or while processing the request.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_rewind","msg":"server closed the connection unexpectedly","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_rewind","msg":"\tThis probably means the server terminated abnormally","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_rewind","msg":"\tbefore or while processing the request.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:35Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:35Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","uuid":"4d978e90-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:35Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:35.893 GMT [28] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.895 GMT [28] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.895 GMT [28] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.902 GMT [28] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.910 GMT [28] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.910 GMT [28] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.910 GMT [28] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.911 GMT [28] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.911 GMT [28] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.911 GMT [28] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.911 GMT [28] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.911 GMT [28] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.911 GMT [28] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.917 GMT [31] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.917 GMT [31] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.917 GMT [31] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"pg_ctl","msg":"2023-03-24 19:16:35.986 GMT [32] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.001 GMT [33] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.057 GMT [34] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.080 GMT [28] LOG:  startup process (PID 31) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.080 GMT [28] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.081 GMT [28] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:36Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"256f70a0-46c4-4d7d-a522-b1b6dbd34b08","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-24T19:16:36Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"695c99b0-ec5e-402e-b40f-fde5e6b6c609","uuid":"653b8b24-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:36Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"695c99b0-ec5e-402e-b40f-fde5e6b6c609","uuid":"653b8b24-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"695c99b0-ec5e-402e-b40f-fde5e6b6c609","uuid":"653b8b24-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"695c99b0-ec5e-402e-b40f-fde5e6b6c609","uuid":"653b8b24-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"695c99b0-ec5e-402e-b40f-fde5e6b6c609","uuid":"653b8b24-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:36Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"695c99b0-ec5e-402e-b40f-fde5e6b6c609","uuid":"653b8b24-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:36.252 GMT [44] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.252 GMT [44] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.252 GMT [44] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.257 GMT [44] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.261 GMT [44] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.261 GMT [44] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.261 GMT [44] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.262 GMT [44] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.262 GMT [44] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.262 GMT [44] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.262 GMT [44] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.262 GMT [44] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.262 GMT [44] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.267 GMT [47] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.267 GMT [47] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.267 GMT [47] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.312 GMT [48] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.367 GMT [44] LOG:  startup process (PID 47) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.367 GMT [44] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.368 GMT [44] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:36Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"695c99b0-ec5e-402e-b40f-fde5e6b6c609","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-24T19:16:36Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"679dcc19-01f6-46f7-a2dc-25a783128849","uuid":"65644186-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:36Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"679dcc19-01f6-46f7-a2dc-25a783128849","uuid":"65644186-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"679dcc19-01f6-46f7-a2dc-25a783128849","uuid":"65644186-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"679dcc19-01f6-46f7-a2dc-25a783128849","uuid":"65644186-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"679dcc19-01f6-46f7-a2dc-25a783128849","uuid":"65644186-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:36Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"679dcc19-01f6-46f7-a2dc-25a783128849","uuid":"65644186-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:36.521 GMT [59] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.522 GMT [59] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.522 GMT [59] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.536 GMT [59] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.544 GMT [59] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.544 GMT [59] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.544 GMT [59] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.545 GMT [59] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.545 GMT [59] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.545 GMT [59] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.545 GMT [59] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.545 GMT [59] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.545 GMT [59] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.556 GMT [62] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.556 GMT [62] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.556 GMT [62] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.656 GMT [59] LOG:  startup process (PID 62) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.657 GMT [59] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.657 GMT [59] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:36Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"679dcc19-01f6-46f7-a2dc-25a783128849","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-24T19:16:36Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"526956cd-9808-4b1b-8f60-f6092f8bb6ed","uuid":"658c4ee4-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:36Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"526956cd-9808-4b1b-8f60-f6092f8bb6ed","uuid":"658c4ee4-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"526956cd-9808-4b1b-8f60-f6092f8bb6ed","uuid":"658c4ee4-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"526956cd-9808-4b1b-8f60-f6092f8bb6ed","uuid":"658c4ee4-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"526956cd-9808-4b1b-8f60-f6092f8bb6ed","uuid":"658c4ee4-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:36Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"526956cd-9808-4b1b-8f60-f6092f8bb6ed","uuid":"658c4ee4-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:36.777 GMT [73] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.778 GMT [73] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.778 GMT [73] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.793 GMT [73] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.798 GMT [73] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.798 GMT [73] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.798 GMT [73] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.799 GMT [73] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.799 GMT [73] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.799 GMT [73] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.799 GMT [73] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.799 GMT [73] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.799 GMT [73] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.804 GMT [76] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.805 GMT [76] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.805 GMT [76] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.903 GMT [73] LOG:  startup process (PID 76) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.903 GMT [73] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"2023-03-24 19:16:36.904 GMT [73] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:36Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"526956cd-9808-4b1b-8f60-f6092f8bb6ed","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-24T19:16:36Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9466de1a-32dc-4b3d-93a4-a666b93d4296","uuid":"65b46f8a-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:36Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9466de1a-32dc-4b3d-93a4-a666b93d4296","uuid":"65b46f8a-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9466de1a-32dc-4b3d-93a4-a666b93d4296","uuid":"65b46f8a-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9466de1a-32dc-4b3d-93a4-a666b93d4296","uuid":"65b46f8a-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9466de1a-32dc-4b3d-93a4-a666b93d4296","uuid":"65b46f8a-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:36Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:36Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:37Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9466de1a-32dc-4b3d-93a4-a666b93d4296","uuid":"65b46f8a-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:37.039 GMT [87] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.039 GMT [87] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.039 GMT [87] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.046 GMT [87] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.051 GMT [87] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.059 GMT [90] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.059 GMT [90] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.059 GMT [90] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.156 GMT [87] LOG:  startup process (PID 90) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.156 GMT [87] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.157 GMT [87] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:37Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9466de1a-32dc-4b3d-93a4-a666b93d4296","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-24T19:16:37Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d87a6801-99cd-4ce9-92ca-11ed462ca77e","uuid":"65dc64a5-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:37Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d87a6801-99cd-4ce9-92ca-11ed462ca77e","uuid":"65dc64a5-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d87a6801-99cd-4ce9-92ca-11ed462ca77e","uuid":"65dc64a5-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d87a6801-99cd-4ce9-92ca-11ed462ca77e","uuid":"65dc64a5-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d87a6801-99cd-4ce9-92ca-11ed462ca77e","uuid":"65dc64a5-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:37Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d87a6801-99cd-4ce9-92ca-11ed462ca77e","uuid":"65dc64a5-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:37.302 GMT [101] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.303 GMT [101] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.303 GMT [101] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.324 GMT [101] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.328 GMT [101] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.334 GMT [104] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.334 GMT [104] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.334 GMT [104] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.433 GMT [101] LOG:  startup process (PID 104) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.433 GMT [101] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.433 GMT [101] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:37Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d87a6801-99cd-4ce9-92ca-11ed462ca77e","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-24T19:16:37Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4ebbe0e9-7406-4a08-a960-83742f7fd727","uuid":"66040f16-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:37Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4ebbe0e9-7406-4a08-a960-83742f7fd727","uuid":"66040f16-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4ebbe0e9-7406-4a08-a960-83742f7fd727","uuid":"66040f16-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4ebbe0e9-7406-4a08-a960-83742f7fd727","uuid":"66040f16-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4ebbe0e9-7406-4a08-a960-83742f7fd727","uuid":"66040f16-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:37Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4ebbe0e9-7406-4a08-a960-83742f7fd727","uuid":"66040f16-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:37.580 GMT [115] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.581 GMT [115] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.581 GMT [115] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.595 GMT [115] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.600 GMT [115] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.606 GMT [119] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.606 GMT [118] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.606 GMT [118] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.606 GMT [118] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.708 GMT [115] LOG:  startup process (PID 118) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.708 GMT [115] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.709 GMT [115] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:37Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4ebbe0e9-7406-4a08-a960-83742f7fd727","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-24T19:16:37Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a6df4385-886d-43dd-a795-52698fb60920","uuid":"662cd889-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:37Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a6df4385-886d-43dd-a795-52698fb60920","uuid":"662cd889-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a6df4385-886d-43dd-a795-52698fb60920","uuid":"662cd889-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a6df4385-886d-43dd-a795-52698fb60920","uuid":"662cd889-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a6df4385-886d-43dd-a795-52698fb60920","uuid":"662cd889-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:37Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a6df4385-886d-43dd-a795-52698fb60920","uuid":"662cd889-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:37.828 GMT [130] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.829 GMT [130] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.829 GMT [130] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.835 GMT [130] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.838 GMT [130] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.843 GMT [133] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.843 GMT [133] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.843 GMT [133] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.941 GMT [130] LOG:  startup process (PID 133) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.941 GMT [130] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:37Z","logger":"pg_ctl","msg":"2023-03-24 19:16:37.942 GMT [130] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:38Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a6df4385-886d-43dd-a795-52698fb60920","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-24T19:16:38Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b9b1fc22-997b-4348-89aa-07678524003e","uuid":"665db07f-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:38Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b9b1fc22-997b-4348-89aa-07678524003e","uuid":"665db07f-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b9b1fc22-997b-4348-89aa-07678524003e","uuid":"665db07f-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b9b1fc22-997b-4348-89aa-07678524003e","uuid":"665db07f-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b9b1fc22-997b-4348-89aa-07678524003e","uuid":"665db07f-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:38Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b9b1fc22-997b-4348-89aa-07678524003e","uuid":"665db07f-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:38.146 GMT [144] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.146 GMT [144] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.146 GMT [144] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.154 GMT [144] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.160 GMT [144] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.166 GMT [147] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.166 GMT [147] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.166 GMT [147] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.264 GMT [144] LOG:  startup process (PID 147) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.264 GMT [144] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"2023-03-24 19:16:38.265 GMT [144] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:38Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b9b1fc22-997b-4348-89aa-07678524003e","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-24T19:16:39Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6ec52344-1d58-4407-883c-45011bd8b88a","uuid":"6748c0b0-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:39Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6ec52344-1d58-4407-883c-45011bd8b88a","uuid":"6748c0b0-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:39Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6ec52344-1d58-4407-883c-45011bd8b88a","uuid":"6748c0b0-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:39Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6ec52344-1d58-4407-883c-45011bd8b88a","uuid":"6748c0b0-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:39Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6ec52344-1d58-4407-883c-45011bd8b88a","uuid":"6748c0b0-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:39Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:39Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:39Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:41Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6ec52344-1d58-4407-883c-45011bd8b88a","uuid":"6748c0b0-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:41.311 GMT [158] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.312 GMT [158] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.312 GMT [158] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.320 GMT [158] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.325 GMT [158] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.334 GMT [161] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.334 GMT [161] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.334 GMT [161] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.383 GMT [162] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.405 GMT [163] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.446 GMT [158] LOG:  startup process (PID 161) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.446 GMT [158] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"2023-03-24 19:16:41.447 GMT [158] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:41Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6ec52344-1d58-4407-883c-45011bd8b88a","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-24T19:16:44Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"608f9cfc-3758-498b-b1ac-5330f435b84e","uuid":"69eeeefd-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:44Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"608f9cfc-3758-498b-b1ac-5330f435b84e","uuid":"69eeeefd-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"608f9cfc-3758-498b-b1ac-5330f435b84e","uuid":"69eeeefd-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"608f9cfc-3758-498b-b1ac-5330f435b84e","uuid":"69eeeefd-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"608f9cfc-3758-498b-b1ac-5330f435b84e","uuid":"69eeeefd-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:44Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"608f9cfc-3758-498b-b1ac-5330f435b84e","uuid":"69eeeefd-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:44.136 GMT [174] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.137 GMT [174] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.137 GMT [174] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.145 GMT [174] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.149 GMT [174] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.155 GMT [178] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.155 GMT [178] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.155 GMT [178] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.252 GMT [174] LOG:  startup process (PID 178) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.252 GMT [174] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"2023-03-24 19:16:44.253 GMT [174] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:44Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"608f9cfc-3758-498b-b1ac-5330f435b84e","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:45Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:47Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-24T19:16:49Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e9965c1-7f84-4244-ae2f-38abefaf6008","uuid":"6d24a621-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:49Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e9965c1-7f84-4244-ae2f-38abefaf6008","uuid":"6d24a621-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e9965c1-7f84-4244-ae2f-38abefaf6008","uuid":"6d24a621-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e9965c1-7f84-4244-ae2f-38abefaf6008","uuid":"6d24a621-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e9965c1-7f84-4244-ae2f-38abefaf6008","uuid":"6d24a621-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:49Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e9965c1-7f84-4244-ae2f-38abefaf6008","uuid":"6d24a621-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:16:49.528 GMT [188] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.529 GMT [188] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.529 GMT [188] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.536 GMT [188] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.541 GMT [188] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.547 GMT [191] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.547 GMT [191] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.547 GMT [191] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.647 GMT [188] LOG:  startup process (PID 191) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.647 GMT [188] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"2023-03-24 19:16:49.647 GMT [188] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:49Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:49Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e9965c1-7f84-4244-ae2f-38abefaf6008","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:54Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:16:54Z","msg":"Liveness probe failing","logging_pod":"cluster-example-4","err":"could not establish connection"}
{"level":"info","ts":"2023-03-24T19:16:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:55Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:55Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:57Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:58Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:16:58Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:58Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:58Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-24T19:16:59Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d1d27a2d-eaff-4caf-8758-f949b2763dad","uuid":"73682562-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-4","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:16:59Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d1d27a2d-eaff-4caf-8758-f949b2763dad","uuid":"73682562-ca78-11ed-b8c6-321249daa88e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d1d27a2d-eaff-4caf-8758-f949b2763dad","uuid":"73682562-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d1d27a2d-eaff-4caf-8758-f949b2763dad","uuid":"73682562-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d1d27a2d-eaff-4caf-8758-f949b2763dad","uuid":"73682562-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-4","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-4","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T19:16:59Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 07:01:45 PM UTC\nLatest checkpoint location:           0/18000028\nLatest checkpoint's REDO location:    0/18000028\nLatest checkpoint's REDO WAL file:    000000060000000000000018\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 07:01:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T19:16:59Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:16:59Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-4","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-4 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d1d27a2d-eaff-4caf-8758-f949b2763dad","uuid":"73682562-ca78-11ed-b8c6-321249daa88e","logging_pod":"cluster-example-4","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:16:59Z","msg":"Starting up instance","logging_pod":"cluster-example-4","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-24 19:17:00.032 GMT [203] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.033 GMT [203] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.033 GMT [203] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.041 GMT [203] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.046 GMT [203] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.051 GMT [206] LOG:  database system was shut down at 2023-03-24 19:01:45 GMT","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.051 GMT [206] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.051 GMT [206] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.154 GMT [203] LOG:  startup process (PID 206) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.154 GMT [203] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"2023-03-24 19:17:00.155 GMT [203] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:17:00Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d1d27a2d-eaff-4caf-8758-f949b2763dad","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-24T19:17:00Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:00Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:01Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:01Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:01Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:01Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:03Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:04Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:17:04Z","msg":"Liveness probe failing","logging_pod":"cluster-example-4","err":"could not establish connection"}
{"level":"info","ts":"2023-03-24T19:17:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:05Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:08Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:13Z","msg":"Instance status probe failing","logging_pod":"cluster-example-4","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Liveness probe failing","logging_pod":"cluster-example-4","err":"could not establish connection"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Readiness probe failing","logging_pod":"cluster-example-4","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Received termination signal","logging_pod":"cluster-example-4","signal":"interrupt"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Requesting smart shutdown of the PostgreSQL instance","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:14Z","logger":"pg_ctl","msg":"pg_ctl: no server running\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Error while handling the smart shutdown request: requiring fast shutdown","logging_pod":"cluster-example-4","err":"instance is not running"}
{"level":"info","ts":"2023-03-24T19:17:14Z","logger":"pg_ctl","msg":"pg_ctl: no server running\n","pipe":"stdout","logging_pod":"cluster-example-4"}
{"level":"error","ts":"2023-03-24T19:17:14Z","msg":"Error while shutting down the PostgreSQL instance","logging_pod":"cluster-example-4","error":"instance is not running","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/internal/cmd/manager/instance/run/lifecycle.tryShuttingDownSmartFast\n\tinternal/cmd/manager/instance/run/lifecycle/shutdown.go:69\ngithub.com/cloudnative-pg/cloudnative-pg/internal/cmd/manager/instance/run/lifecycle.(*PostgresLifecycle).Start\n\tinternal/cmd/manager/instance/run/lifecycle/lifecycle.go:131\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/manager/runnable_group.go:219"}
{"level":"error","ts":"2023-03-24T19:17:14Z","msg":"error while shutting down instance, proceeding","logging_pod":"cluster-example-4","error":"instance is not running","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/internal/cmd/manager/instance/run/lifecycle.(*PostgresLifecycle).Start\n\tinternal/cmd/manager/instance/run/lifecycle/lifecycle.go:132\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/manager/runnable_group.go:219"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Stopping and waiting for non leader election runnables"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Stopping and waiting for leader election runnables"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Shutdown signal received, waiting for all workers to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Webserver exited","logging_pod":"cluster-example-4","address":"localhost:8010"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Webserver exited","logging_pod":"cluster-example-4","address":":8000"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Webserver exited","logging_pod":"cluster-example-4","address":":9187"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.json","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Exited log pipe","fileName":"/controller/log/postgres","logging_pod":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"All workers finished","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Stopping and waiting for caches"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Stopping and waiting for webhooks"}
{"level":"info","ts":"2023-03-24T19:17:14Z","msg":"Wait completed, proceeding to shutdown the manager"}
