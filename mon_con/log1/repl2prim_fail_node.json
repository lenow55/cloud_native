{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-3","version":"1.19.1","build":{"Version":"1.19.1","Commit":"cb24d237","Date":"2023-03-20"}}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":":9187"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":":8000"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":"localhost:8010"}
{"level":"debug","ts":"2023-03-24T15:16:16Z","msg":"starting the postgres loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:16Z","msg":"starting signal loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:16Z","msg":"Checking PGDATA coherence","caller":"internal/cmd/manager/instance/run/lifecycle/run.go:255","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"debug","ts":"2023-03-24T15:16:16Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T15:16:16Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","filename":"/controller/certificates/server.crt","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","filename":"/controller/certificates/server.key","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","filename":"/controller/certificates/streaming_replica.crt","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","filename":"/controller/certificates/streaming_replica.key","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","filename":"/controller/certificates/client-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","filename":"/controller/certificates/server-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-4","targetPrimary":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-4","targetPrimary":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-4","currentPrimary":"cluster-example-4"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 03:15:41 PM UTC\nLatest checkpoint location:           0/16000028\nLatest checkpoint's REDO location:    0/16000028\nLatest checkpoint's REDO WAL file:    000000050000000000000016\nLatest checkpoint's TimeLineID:       5\nLatest checkpoint's PrevTimeLineID:   5\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:746\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 03:15:40 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"pg_rewind","msg":"pg_rewind: servers diverged at WAL location 0/160000A0 on timeline 5","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"pg_rewind","msg":"pg_rewind: no rewind required","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Demoting instance","logging_pod":"cluster-example-3","pgpdata":"/var/lib/postgresql/data/pgdata"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"postmaster start up"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Fri 24 Mar 2023 03:15:41 PM UTC\nLatest checkpoint location:           0/16000028\nLatest checkpoint's REDO location:    0/16000028\nLatest checkpoint's REDO WAL file:    000000050000000000000016\nLatest checkpoint's TimeLineID:       5\nLatest checkpoint's PrevTimeLineID:   5\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:746\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 03:15:40 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"The PID file content is wrong, deleting it and assuming it's stale","file":"/var/lib/postgresql/data/pgdata/postmaster.pid","logging_pod":"cluster-example-3","err":"file does not exist","pidFileContents":""}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"2023-03-24 15:16:16.583 UTC [26] LOG:  redirecting log output to logging collector process","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"2023-03-24 15:16:16.583 UTC [26] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"2023-03-24 15:16:16.583 UTC [26] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"2023-03-24 15:16:16.583 UTC [26] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:16.583 UTC","process_id":"26","session_id":"641dbec0.1a","session_line_num":"1","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:16Z","msg":"Instance is still down, will retry in 1 second","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"444bedcf-1cea-4b49-b48a-3e5a85af2a55","uuid":"d2614093-ca56-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:16.584 UTC","process_id":"26","session_id":"641dbec0.1a","session_line_num":"2","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:16.584 UTC","process_id":"26","session_id":"641dbec0.1a","session_line_num":"3","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:16.584 UTC","process_id":"26","session_id":"641dbec0.1a","session_line_num":"4","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:16.594 UTC","process_id":"26","session_id":"641dbec0.1a","session_line_num":"5","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:16.604 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"1","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-24 15:15:41 UTC","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T15:16:16Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:16.739 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"2","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"entering standby mode","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T15:16:16Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:16Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:16Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.012 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"3","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"consistent recovery state reached at 0/160000A0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.012 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"4","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid record length at 0/160000A0: wanted 24, got 0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.012 UTC","process_id":"26","session_id":"641dbec0.1a","session_line_num":"6","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is ready to accept read-only connections","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.036 UTC","process_id":"58","session_id":"641dbec1.3a","session_line_num":"1","session_start_time":"2023-03-24 15:16:17 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"fetching timeline history file for timeline 6 from primary server","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.045 UTC","process_id":"58","session_id":"641dbec1.3a","session_line_num":"2","session_start_time":"2023-03-24 15:16:17 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"started streaming WAL from primary at 0/16000000 on timeline 5","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.045 UTC","process_id":"58","session_id":"641dbec1.3a","session_line_num":"3","session_start_time":"2023-03-24 15:16:17 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"replication terminated by primary server","detail":"End of WAL reached on timeline 5 at 0/160000A0.","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.045 UTC","process_id":"58","session_id":"641dbec1.3a","session_line_num":"4","session_start_time":"2023-03-24 15:16:17 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P01","message":"terminating walreceiver process due to administrator command","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9698db26-7d55-456d-894e-9a2ac702235c","uuid":"d2dac4d8-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"9698db26-7d55-456d-894e-9a2ac702235c","uuid":"d2dac4d8-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2e9b1438-6027-4b15-88f3-51750c8ad12a","uuid":"d30398dc-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2e9b1438-6027-4b15-88f3-51750c8ad12a","uuid":"d30398dc-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.500 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"5","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"new target timeline is 6","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e6faada7-d247-4f23-9eca-932228fa1213","uuid":"d30bd281-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e6faada7-d247-4f23-9eca-932228fa1213","uuid":"d30bd281-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d82c762a-2841-4ff9-95f2-5d0592c94932","uuid":"d3170fe2-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d82c762a-2841-4ff9-95f2-5d0592c94932","uuid":"d3170fe2-ca56-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T15:16:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T15:16:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:17.779 UTC","process_id":"121","session_id":"641dbec1.79","session_line_num":"1","session_start_time":"2023-03-24 15:16:17 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"started streaming WAL from primary at 0/16000000 on timeline 6","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:16:18Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:16:18.787 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"6","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"redo starts at 0/160000A0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:21:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:21:16.693 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"1","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"restartpoint starting: time","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:21:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:21:16.859 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"2","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"restartpoint complete: wrote 3 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.122 s, sync=0.014 s, total=0.167 s; sync files=2, longest=0.012 s, average=0.007 s; distance=7 kB, estimate=7 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-24T15:21:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 15:21:16.859 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"3","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"recovery restart point at 0/16001E38","detail":"Last completed transaction was at log time 2023-03-24 15:15:44.344752+00.","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:01:44Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:01:44.631 UTC","process_id":"121","session_id":"641dbec1.79","session_line_num":"2","session_start_time":"2023-03-24 15:16:17 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"08P01","message":"could not receive data from WAL stream: FATAL:  terminating connection due to administrator command","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:01:44Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:01:44Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:01:44Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:01:44Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:01:44Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:01:44.927 UTC","process_id":"4565","session_id":"641df398.11d5","session_line_num":"1","session_start_time":"2023-03-24 19:01:44 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"08006","message":"could not connect to the primary server: connection to server at \"cluster-example-rw\" (10.107.7.208), port 5432 failed: FATAL:  the database system is shutting down","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:01:44Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:01:44Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:01:45Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:01:45.062 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"7","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"waiting for WAL to become available at 0/18000018","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:01:49Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:01:49Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ba7ad459-aef4-43bb-be7e-279e6f835793","uuid":"653c747e-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ba7ad459-aef4-43bb-be7e-279e6f835793","uuid":"653c747e-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1088921f-7d44-448b-8dde-cc1fdb3a213b","uuid":"6544e5bf-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1088921f-7d44-448b-8dde-cc1fdb3a213b","uuid":"6544e5bf-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e3d1990-1171-4a26-9af6-2a20ca0246b1","uuid":"654f8c59-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e3d1990-1171-4a26-9af6-2a20ca0246b1","uuid":"654f8c59-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","msg":"Setting myself as primary","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e3d1990-1171-4a26-9af6-2a20ca0246b1","uuid":"654f8c59-ca76-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","phase":"Failing over","currentTimestamp":"2023-03-24T19:02:17.346003Z","targetPrimaryTimestamp":"2023-03-24T19:02:17.225285Z","currentPrimaryTimestamp":"2023-03-24T15:15:44.288833Z","msPassedSinceTargetPrimaryTimestamp":120,"msPassedSinceCurrentPrimaryTimestamp":13593057,"msDifferenceBetweenCurrentAndTargetPrimary":-13592936}
{"level":"info","ts":"2023-03-24T19:02:17Z","msg":"I'm the target primary, wait for the wal_receiver to be terminated","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e3d1990-1171-4a26-9af6-2a20ca0246b1","uuid":"654f8c59-ca76-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","msg":"I'm the target primary, applying WALs and promoting my instance","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e3d1990-1171-4a26-9af6-2a20ca0246b1","uuid":"654f8c59-ca76-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"promote"}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               in archive recovery\npg_control last modified:             Fri 24 Mar 2023 03:26:16 PM UTC\nLatest checkpoint location:           0/17000060\nLatest checkpoint's REDO location:    0/16001E38\nLatest checkpoint's REDO WAL file:    000000060000000000000016\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:747\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  747\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Fri 24 Mar 2023 03:20:44 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/18000000\nMin recovery ending loc's timeline:   6\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","msg":"Promoting instance","logging_pod":"cluster-example-3","pgctl_options":["-D","/var/lib/postgresql/data/pgdata","-w","promote","-t 40000000"]}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:17.353 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"8","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"received promote request","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:17.353 UTC","process_id":"4618","session_id":"641df39d.120a","session_line_num":"1","session_start_time":"2023-03-24 19:01:49 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P01","message":"terminating walreceiver process due to administrator command","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:17.618 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"9","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"redo done at 0/17000110 system usage: CPU: user: 0.06 s, system: 0.05 s, elapsed: 13558.83 s","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:17.618 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"10","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"last completed transaction was at log time 2023-03-24 15:15:44.344752+00","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:02:17Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:17Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:17.894 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"11","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"selected new timeline ID: 7","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:02:18Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:18Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:19.034 UTC","process_id":"30","session_id":"641dbec0.1e","session_line_num":"12","session_start_time":"2023-03-24 15:16:16 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"archive recovery complete","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:19.044 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"4","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: force","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:19.047 UTC","process_id":"26","session_id":"641dbec0.1a","session_line_num":"7","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is ready to accept connections","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"pg_ctl","msg":"waiting for server to promote..... done","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"pg_ctl","msg":"server promoted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:19Z","msg":"Requesting a checkpoint","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:19.069 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"5","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.008 s, sync=0.004 s, total=0.025 s; sync files=2, longest=0.004 s, average=0.002 s; distance=32760 kB, estimate=32760 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:19.069 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"6","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: immediate force wait","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:02:19Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-3","walName":"pg_wal/00000007.history","currentPrimary":"cluster-example-4","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:19Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:02:19.092 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"7","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 0 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.007 s, sync=0.001 s, total=0.023 s; sync files=0, longest=0.000 s, average=0.000 s; distance=0 kB, estimate=29484 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:02:19Z","msg":"The PostgreSQL instance has been promoted successfully","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:02:19Z","msg":"Finished setting myself as primary","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7e3d1990-1171-4a26-9af6-2a20ca0246b1","uuid":"654f8c59-ca76-11ed-b5f1-9e3eaa79ca75","logging_pod":"cluster-example-3","phase":"Failing over","currentTimestamp":"2023-03-24T19:02:19.110436Z","targetPrimaryTimestamp":"2023-03-24T19:02:17.225285Z","currentPrimaryTimestamp":"2023-03-24T19:02:19.092644Z","msPassedSinceTargetPrimaryTimestamp":1885,"msPassedSinceCurrentPrimaryTimestamp":17,"msDifferenceBetweenCurrentAndTargetPrimary":1867}
{"level":"debug","ts":"2023-03-24T19:02:19Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"98db4c6e-728a-4b6c-bf85-43f1fee45b9a","uuid":"666a3dd7-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:02:19Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"98db4c6e-728a-4b6c-bf85-43f1fee45b9a","uuid":"666a3dd7-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:02:21Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"61d1cc90-1ae0-464c-a112-c1a8eaf0dd2f","uuid":"67a2d002-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:02:21Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"61d1cc90-1ae0-464c-a112-c1a8eaf0dd2f","uuid":"67a2d002-ca76-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:07:19Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:07:19.104 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"8","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: time","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:07:20Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:07:20Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-3","walName":"pg_wal/000000070000000000000018","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:07:20Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3c477806-da8e-43c7-bd39-fae22c43ef49","uuid":"1a4f3264-ca77-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:07:20Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"3c477806-da8e-43c7-bd39-fae22c43ef49","uuid":"1a4f3264-ca77-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:07:21Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b23fe201-c54d-4fd8-9424-f50046b4f18f","uuid":"1a5d90db-ca77-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:07:21Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b23fe201-c54d-4fd8-9424-f50046b4f18f","uuid":"1a5d90db-ca77-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:07:21Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:07:21.210 UTC","process_id":"28","session_id":"641dbec0.1c","session_line_num":"9","session_start_time":"2023-03-24 15:16:16 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.090 s, sync=0.004 s, total=2.106 s; sync files=2, longest=0.003 s, average=0.002 s; distance=7 kB, estimate=26536 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-24T19:12:21Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:12:21Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-3","walName":"pg_wal/000000070000000000000019","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:15:24Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"59a77a2d-6027-4deb-be0f-85eae334e0a2","uuid":"3aaf94dc-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:15:24Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"59a77a2d-6027-4deb-be0f-85eae334e0a2","uuid":"3aaf94dc-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:15:30Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7f77690e-7765-4db4-a30e-2100cb2ebb9d","uuid":"3e359424-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:15:30Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7f77690e-7765-4db4-a30e-2100cb2ebb9d","uuid":"3e359424-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:15:30Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"54281f91-6e38-4214-9f08-1c5a26ae60cc","uuid":"3e499807-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:15:30Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"54281f91-6e38-4214-9f08-1c5a26ae60cc","uuid":"3e499807-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7ce951dc-8396-4b25-9179-e4b0b2a9aca4","uuid":"4d965a2b-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7ce951dc-8396-4b25-9179-e4b0b2a9aca4","uuid":"4d965a2b-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ad1cbe63-cc9e-4a0c-a8f8-ee4d18e55565","uuid":"4da898d4-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-24T19:15:56Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ad1cbe63-cc9e-4a0c-a8f8-ee4d18e55565","uuid":"4da898d4-ca78-11ed-b5f1-9e3eaa79ca75","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:16:35.844 UTC","user_name":"streaming_replica","database_name":"postgres","process_id":"14038","connection_from":"10.40.1.245:58356","session_id":"641df6ef.36d6","session_line_num":"1","command_tag":"SELECT","session_start_time":"2023-03-24 19:15:59 UTC","virtual_transaction_id":"3/8463","transaction_id":"0","error_severity":"LOG","sql_state_code":"08006","message":"could not send data to client: Connection reset by peer","query":"SELECT path, begin,\n  pg_read_binary_file(path, begin, len, true) AS chunk\nFROM unnest ($1::text[], $2::int8[], $3::int4[]) as x(path, begin, len)","application_name":"cluster-example-4","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-24T19:16:35Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-3","record":{"log_time":"2023-03-24 19:16:35.844 UTC","user_name":"streaming_replica","database_name":"postgres","process_id":"14038","connection_from":"10.40.1.245:58356","session_id":"641df6ef.36d6","session_line_num":"2","command_tag":"SELECT","session_start_time":"2023-03-24 19:15:59 UTC","virtual_transaction_id":"3/8463","transaction_id":"0","error_severity":"FATAL","sql_state_code":"08006","message":"connection to client lost","query":"SELECT path, begin,\n  pg_read_binary_file(path, begin, len, true) AS chunk\nFROM unnest ($1::text[], $2::int8[], $3::int4[]) as x(path, begin, len)","application_name":"cluster-example-4","backend_type":"client backend","query_id":"0"}}
