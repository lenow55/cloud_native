{"level":"info","ts":"2023-03-25T15:25:54Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-3","version":"1.19.1","build":{"Version":"1.19.1","Commit":"cb24d237","Date":"2023-03-20"}}
{"level":"info","ts":"2023-03-25T15:25:54Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":":9187"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":":8000"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":"localhost:8010"}
{"level":"debug","ts":"2023-03-25T15:25:54Z","msg":"starting the postgres loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-25T15:25:54Z","msg":"starting signal loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-3"}
{"level":"debug","ts":"2023-03-25T15:25:54Z","msg":"Checking PGDATA coherence","caller":"internal/cmd/manager/instance/run/lifecycle/run.go:255","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"debug","ts":"2023-03-25T15:25:54Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ac87636e-e044-46ca-bb2d-5d61bd7e0cd7","uuid":"55a0cc94-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:25:54Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ac87636e-e044-46ca-bb2d-5d61bd7e0cd7","uuid":"55a0cc94-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ac87636e-e044-46ca-bb2d-5d61bd7e0cd7","uuid":"55a0cc94-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ac87636e-e044-46ca-bb2d-5d61bd7e0cd7","uuid":"55a0cc94-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ac87636e-e044-46ca-bb2d-5d61bd7e0cd7","uuid":"55a0cc94-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:25:54Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:25:55Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-25T15:25:55Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:25:55Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:25:56Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-25T15:25:58Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:25:58Z","logger":"pg_rewind","msg":"pg_rewind: servers diverged at WAL location 0/23000000 on timeline 9","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:25:58Z","logger":"pg_rewind","msg":"pg_rewind: rewinding from last common checkpoint at 0/22000060 on timeline 9","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:25:58Z","logger":"pg_rewind","msg":"pg_rewind: reading source file list","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:01Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-25T15:26:02Z","logger":"pg_rewind","msg":"pg_rewind: reading target file list","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:02Z","logger":"pg_rewind","msg":"pg_rewind: reading WAL in target","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:02Z","logger":"pg_rewind","msg":"pg_rewind: need to copy 149 MB (total source directory size is 174 MB)","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:02Z","logger":"pg_rewind","msg":"     0/153227 kB (0%) copied","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:03Z","logger":"pg_rewind","msg":"  9584/153227 kB (6%) copied","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:04Z","logger":"pg_rewind","msg":"pg_rewind: error: unexpected result while fetching remote files: server closed the connection unexpectedly","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:04Z","logger":"pg_rewind","msg":"\tThis probably means the server terminated abnormally","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:04Z","logger":"pg_rewind","msg":"\tbefore or while processing the request.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:04Z","logger":"pg_rewind","msg":"server closed the connection unexpectedly","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:04Z","logger":"pg_rewind","msg":"\tThis probably means the server terminated abnormally","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:04Z","logger":"pg_rewind","msg":"\tbefore or while processing the request.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:04Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:04Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ac87636e-e044-46ca-bb2d-5d61bd7e0cd7","uuid":"55a0cc94-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:04Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:04Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"waiting for server to start.....2023-03-25 15:26:06.189 GMT [28] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.249 GMT [28] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.249 GMT [28] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.593 GMT [28] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.811 GMT [28] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.964 GMT [31] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.964 GMT [31] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:06Z","logger":"pg_ctl","msg":"2023-03-25 15:26:06.964 GMT [31] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":".2023-03-25 15:26:07.242 GMT [33] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":"2023-03-25 15:26:07.255 GMT [34] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":"2023-03-25 15:26:07.310 GMT [35] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":"2023-03-25 15:26:07.331 GMT [28] LOG:  startup process (PID 31) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":"2023-03-25 15:26:07.331 GMT [28] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":"2023-03-25 15:26:07.331 GMT [28] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:07Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ac87636e-e044-46ca-bb2d-5d61bd7e0cd7","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-25T15:26:07Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"67af8800-9e3a-415b-89bf-16dd6b792c48","uuid":"5d12b022-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:07Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"67af8800-9e3a-415b-89bf-16dd6b792c48","uuid":"5d12b022-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"67af8800-9e3a-415b-89bf-16dd6b792c48","uuid":"5d12b022-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"67af8800-9e3a-415b-89bf-16dd6b792c48","uuid":"5d12b022-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"67af8800-9e3a-415b-89bf-16dd6b792c48","uuid":"5d12b022-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:07Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:07Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"67af8800-9e3a-415b-89bf-16dd6b792c48","uuid":"5d12b022-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:07Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:08.253 GMT [45] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.253 GMT [45] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.254 GMT [45] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.434 GMT [45] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.441 GMT [45] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.453 GMT [48] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.453 GMT [48] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.453 GMT [48] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.565 GMT [45] LOG:  startup process (PID 48) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.565 GMT [45] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.566 GMT [45] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:08Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"67af8800-9e3a-415b-89bf-16dd6b792c48","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-25T15:26:08Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f0234218-8f3b-408c-9542-9aeddd04f289","uuid":"5dc36cd0-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:08Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f0234218-8f3b-408c-9542-9aeddd04f289","uuid":"5dc36cd0-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f0234218-8f3b-408c-9542-9aeddd04f289","uuid":"5dc36cd0-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f0234218-8f3b-408c-9542-9aeddd04f289","uuid":"5dc36cd0-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f0234218-8f3b-408c-9542-9aeddd04f289","uuid":"5dc36cd0-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:08Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f0234218-8f3b-408c-9542-9aeddd04f289","uuid":"5dc36cd0-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:08.664 GMT [58] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.665 GMT [58] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.665 GMT [58] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.703 GMT [58] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.710 GMT [58] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.718 GMT [61] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.718 GMT [61] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.718 GMT [61] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.814 GMT [58] LOG:  startup process (PID 61) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.814 GMT [58] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.814 GMT [58] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:08Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f0234218-8f3b-408c-9542-9aeddd04f289","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-25T15:26:08Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d75ec3d7-755f-4b89-b483-831e2af9cdd3","uuid":"5dea51c5-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:08Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d75ec3d7-755f-4b89-b483-831e2af9cdd3","uuid":"5dea51c5-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d75ec3d7-755f-4b89-b483-831e2af9cdd3","uuid":"5dea51c5-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d75ec3d7-755f-4b89-b483-831e2af9cdd3","uuid":"5dea51c5-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d75ec3d7-755f-4b89-b483-831e2af9cdd3","uuid":"5dea51c5-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:08Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d75ec3d7-755f-4b89-b483-831e2af9cdd3","uuid":"5dea51c5-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:08Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:08.911 GMT [72] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.912 GMT [72] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.912 GMT [72] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.917 GMT [72] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.920 GMT [72] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.927 GMT [75] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.927 GMT [75] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:08Z","logger":"pg_ctl","msg":"2023-03-25 15:26:08.927 GMT [75] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.022 GMT [72] LOG:  startup process (PID 75) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.022 GMT [72] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.023 GMT [72] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:09Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d75ec3d7-755f-4b89-b483-831e2af9cdd3","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-25T15:26:09Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"26d3d78d-e6d4-4ad9-aa19-19eed020eef5","uuid":"5e119e75-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:09Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"26d3d78d-e6d4-4ad9-aa19-19eed020eef5","uuid":"5e119e75-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"26d3d78d-e6d4-4ad9-aa19-19eed020eef5","uuid":"5e119e75-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"26d3d78d-e6d4-4ad9-aa19-19eed020eef5","uuid":"5e119e75-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"26d3d78d-e6d4-4ad9-aa19-19eed020eef5","uuid":"5e119e75-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:09Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"26d3d78d-e6d4-4ad9-aa19-19eed020eef5","uuid":"5e119e75-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:09.175 GMT [86] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.176 GMT [86] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.176 GMT [86] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.182 GMT [86] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.185 GMT [86] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.189 GMT [89] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.189 GMT [89] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.189 GMT [89] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.283 GMT [86] LOG:  startup process (PID 89) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.284 GMT [86] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.284 GMT [86] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:09Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"26d3d78d-e6d4-4ad9-aa19-19eed020eef5","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-25T15:26:09Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"69a5918e-38da-4866-b2f8-8a2848ddd89c","uuid":"5e397887-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:09Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"69a5918e-38da-4866-b2f8-8a2848ddd89c","uuid":"5e397887-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"69a5918e-38da-4866-b2f8-8a2848ddd89c","uuid":"5e397887-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"69a5918e-38da-4866-b2f8-8a2848ddd89c","uuid":"5e397887-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"69a5918e-38da-4866-b2f8-8a2848ddd89c","uuid":"5e397887-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:09Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"69a5918e-38da-4866-b2f8-8a2848ddd89c","uuid":"5e397887-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:09.431 GMT [100] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.431 GMT [100] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.431 GMT [100] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.437 GMT [100] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.439 GMT [100] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.444 GMT [103] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.444 GMT [103] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.444 GMT [103] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.542 GMT [100] LOG:  startup process (PID 103) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.542 GMT [100] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.543 GMT [100] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:09Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"69a5918e-38da-4866-b2f8-8a2848ddd89c","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-25T15:26:09Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7d8b8bd5-1a36-4383-9ca9-0b4149cd7c39","uuid":"5e60f794-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:09Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7d8b8bd5-1a36-4383-9ca9-0b4149cd7c39","uuid":"5e60f794-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7d8b8bd5-1a36-4383-9ca9-0b4149cd7c39","uuid":"5e60f794-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7d8b8bd5-1a36-4383-9ca9-0b4149cd7c39","uuid":"5e60f794-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7d8b8bd5-1a36-4383-9ca9-0b4149cd7c39","uuid":"5e60f794-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:09Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7d8b8bd5-1a36-4383-9ca9-0b4149cd7c39","uuid":"5e60f794-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:09.686 GMT [114] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.686 GMT [114] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.686 GMT [114] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.692 GMT [114] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.695 GMT [114] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.699 GMT [117] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.699 GMT [117] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.699 GMT [117] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.790 GMT [114] LOG:  startup process (PID 117) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.790 GMT [114] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.791 GMT [114] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:09Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7d8b8bd5-1a36-4383-9ca9-0b4149cd7c39","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-25T15:26:09Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6c46bae4-9655-4c08-a4e0-4741d27010d6","uuid":"5e8804e8-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:09Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6c46bae4-9655-4c08-a4e0-4741d27010d6","uuid":"5e8804e8-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6c46bae4-9655-4c08-a4e0-4741d27010d6","uuid":"5e8804e8-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6c46bae4-9655-4c08-a4e0-4741d27010d6","uuid":"5e8804e8-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6c46bae4-9655-4c08-a4e0-4741d27010d6","uuid":"5e8804e8-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:09Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6c46bae4-9655-4c08-a4e0-4741d27010d6","uuid":"5e8804e8-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:09.941 GMT [128] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.941 GMT [128] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.941 GMT [128] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.946 GMT [128] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.949 GMT [128] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.954 GMT [132] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.954 GMT [132] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.954 GMT [132] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","logger":"pg_ctl","msg":"2023-03-25 15:26:09.954 GMT [133] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.008 GMT [134] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.047 GMT [128] LOG:  startup process (PID 132) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.047 GMT [128] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.047 GMT [128] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:10Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6c46bae4-9655-4c08-a4e0-4741d27010d6","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-25T15:26:10Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"33ff20bf-9b80-4401-9684-ff8f7e73cda1","uuid":"5eb8ea6e-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:10Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"33ff20bf-9b80-4401-9684-ff8f7e73cda1","uuid":"5eb8ea6e-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"33ff20bf-9b80-4401-9684-ff8f7e73cda1","uuid":"5eb8ea6e-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"33ff20bf-9b80-4401-9684-ff8f7e73cda1","uuid":"5eb8ea6e-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"33ff20bf-9b80-4401-9684-ff8f7e73cda1","uuid":"5eb8ea6e-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:10Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"33ff20bf-9b80-4401-9684-ff8f7e73cda1","uuid":"5eb8ea6e-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:10.271 GMT [144] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.271 GMT [144] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.271 GMT [144] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.279 GMT [144] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.290 GMT [144] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.295 GMT [148] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.296 GMT [148] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.296 GMT [148] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.388 GMT [144] LOG:  startup process (PID 148) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.388 GMT [144] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"2023-03-25 15:26:10.389 GMT [144] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:10Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:10Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"33ff20bf-9b80-4401-9684-ff8f7e73cda1","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-25T15:26:11Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"03eec69e-b30c-4eff-adbf-bb62a9c0c46b","uuid":"5fa36ef4-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:11Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"03eec69e-b30c-4eff-adbf-bb62a9c0c46b","uuid":"5fa36ef4-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"03eec69e-b30c-4eff-adbf-bb62a9c0c46b","uuid":"5fa36ef4-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"03eec69e-b30c-4eff-adbf-bb62a9c0c46b","uuid":"5fa36ef4-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"03eec69e-b30c-4eff-adbf-bb62a9c0c46b","uuid":"5fa36ef4-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:11Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"03eec69e-b30c-4eff-adbf-bb62a9c0c46b","uuid":"5fa36ef4-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:11.827 GMT [158] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.828 GMT [158] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.828 GMT [158] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.848 GMT [158] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.860 GMT [158] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.877 GMT [161] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.877 GMT [161] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.877 GMT [161] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.971 GMT [158] LOG:  startup process (PID 161) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.971 GMT [158] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"2023-03-25 15:26:11.972 GMT [158] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:11Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:11Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"03eec69e-b30c-4eff-adbf-bb62a9c0c46b","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-25T15:26:14Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2beb668a-aea0-48d8-9819-35dd2921c77b","uuid":"615306da-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:14Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2beb668a-aea0-48d8-9819-35dd2921c77b","uuid":"615306da-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2beb668a-aea0-48d8-9819-35dd2921c77b","uuid":"615306da-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2beb668a-aea0-48d8-9819-35dd2921c77b","uuid":"615306da-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2beb668a-aea0-48d8-9819-35dd2921c77b","uuid":"615306da-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:14Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2beb668a-aea0-48d8-9819-35dd2921c77b","uuid":"615306da-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:14.632 GMT [172] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.632 GMT [172] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.632 GMT [172] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.638 GMT [172] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.641 GMT [172] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.645 GMT [175] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.645 GMT [175] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.645 GMT [175] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.736 GMT [172] LOG:  startup process (PID 175) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.736 GMT [172] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"2023-03-25 15:26:14.736 GMT [172] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:14Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:14Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2beb668a-aea0-48d8-9819-35dd2921c77b","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-25T15:26:19Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1f359163-23af-4432-8278-0244b21a39a3","uuid":"6487af1d-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:19Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1f359163-23af-4432-8278-0244b21a39a3","uuid":"6487af1d-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1f359163-23af-4432-8278-0244b21a39a3","uuid":"6487af1d-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1f359163-23af-4432-8278-0244b21a39a3","uuid":"6487af1d-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1f359163-23af-4432-8278-0244b21a39a3","uuid":"6487af1d-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:19Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:19Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:19Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1f359163-23af-4432-8278-0244b21a39a3","uuid":"6487af1d-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:19Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:20.007 GMT [186] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.008 GMT [186] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.008 GMT [186] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.014 GMT [186] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.018 GMT [186] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.024 GMT [189] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.024 GMT [189] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.024 GMT [189] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.115 GMT [186] LOG:  startup process (PID 189) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.115 GMT [186] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"2023-03-25 15:26:20.116 GMT [186] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:20Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:20Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1f359163-23af-4432-8278-0244b21a39a3","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:20Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:20Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:20Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:21Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:21Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-25T15:26:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:25Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:26Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:26Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:26Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:26Z","msg":"Liveness probe failing","logging_pod":"cluster-example-3","err":"could not establish connection"}
{"level":"info","ts":"2023-03-25T15:26:26Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:27Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:28Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:28Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:28Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:29Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-25T15:26:30Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"63bdb8e2-c45d-448f-8e21-a32fad4dc1d0","uuid":"6ac97f10-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-3","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-25T15:26:30Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"63bdb8e2-c45d-448f-8e21-a32fad4dc1d0","uuid":"6ac97f10-cb21-11ed-b0dd-2e520c4bbf9e","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"63bdb8e2-c45d-448f-8e21-a32fad4dc1d0","uuid":"6ac97f10-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"63bdb8e2-c45d-448f-8e21-a32fad4dc1d0","uuid":"6ac97f10-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-5","targetPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"63bdb8e2-c45d-448f-8e21-a32fad4dc1d0","uuid":"6ac97f10-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-5","currentPrimary":"cluster-example-5"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Sat 25 Mar 2023 03:23:09 PM UTC\nLatest checkpoint location:           0/23000028\nLatest checkpoint's REDO location:    0/23000028\nLatest checkpoint's REDO WAL file:    000000090000000000000023\nLatest checkpoint's TimeLineID:       9\nLatest checkpoint's PrevTimeLineID:   9\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:751\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sat 25 Mar 2023 03:23:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:30Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"63bdb8e2-c45d-448f-8e21-a32fad4dc1d0","uuid":"6ac97f10-cb21-11ed-b0dd-2e520c4bbf9e","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-25 15:26:30.534 GMT [201] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.534 GMT [201] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.534 GMT [201] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.553 GMT [201] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.561 GMT [201] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.578 GMT [204] LOG:  database system was shut down at 2023-03-25 15:23:09 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.579 GMT [204] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.579 GMT [204] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.671 GMT [201] LOG:  startup process (PID 204) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.671 GMT [201] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"2023-03-25 15:26:30.672 GMT [201] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-25T15:26:30Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-25T15:26:30Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"63bdb8e2-c45d-448f-8e21-a32fad4dc1d0","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-25T15:26:31Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-25T15:26:31Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:31Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:31Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:31Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:36Z","msg":"Liveness probe failing","logging_pod":"cluster-example-3","err":"could not establish connection"}
{"level":"info","ts":"2023-03-25T15:26:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:37Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:41Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-25T15:26:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:42Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:42Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:42Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-25T15:26:42Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
