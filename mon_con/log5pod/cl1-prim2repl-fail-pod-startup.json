{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-1","version":"1.19.1","build":{"Version":"1.19.1","Commit":"cb24d237","Date":"2023-03-20"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":":9187"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":":8000"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":"localhost:8010"}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"starting the postgres loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"starting signal loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"Checking PGDATA coherence","caller":"internal/cmd/manager/instance/run/lifecycle/run.go:255","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","filename":"/controller/certificates/server.crt","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","filename":"/controller/certificates/server.key","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","filename":"/controller/certificates/streaming_replica.crt","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","filename":"/controller/certificates/streaming_replica.key","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","filename":"/controller/certificates/client-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","filename":"/controller/certificates/server-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7214833285902848020\nDatabase cluster state:               shut down\npg_control last modified:             Sun 26 Mar 2023 12:57:04 PM UTC\nLatest checkpoint location:           0/5000028\nLatest checkpoint's REDO location:    0/5000028\nLatest checkpoint's REDO WAL file:    000000010000000000000005\nLatest checkpoint's TimeLineID:       1\nLatest checkpoint's PrevTimeLineID:   1\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:739\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sun 26 Mar 2023 12:57:03 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b93c51965bd28e633e861cf1d7bf8b9788e5a288cb5f91888210c1e99527d770\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"pg_rewind","msg":"pg_rewind: servers diverged at WAL location 0/50000A0 on timeline 1","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"pg_rewind","msg":"pg_rewind: no rewind required","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Demoting instance","logging_pod":"cluster-example-1","pgpdata":"/var/lib/postgresql/data/pgdata"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Updated replication settings in postgresql.auto.conf file","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"postmaster start up"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7214833285902848020\nDatabase cluster state:               shut down\npg_control last modified:             Sun 26 Mar 2023 12:57:04 PM UTC\nLatest checkpoint location:           0/5000028\nLatest checkpoint's REDO location:    0/5000028\nLatest checkpoint's REDO WAL file:    000000010000000000000005\nLatest checkpoint's TimeLineID:       1\nLatest checkpoint's PrevTimeLineID:   1\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:739\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sun 26 Mar 2023 12:57:03 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b93c51965bd28e633e861cf1d7bf8b9788e5a288cb5f91888210c1e99527d770\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"The PID file content is wrong, deleting it and assuming it's stale","file":"/var/lib/postgresql/data/pgdata/postmaster.pid","logging_pod":"cluster-example-1","err":"file does not exist","pidFileContents":""}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"2023-03-26 12:57:38.361 UTC [26] LOG:  redirecting log output to logging collector process","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"2023-03-26 12:57:38.361 UTC [26] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.361 UTC","process_id":"26","session_id":"64204142.1a","session_line_num":"1","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.361 UTC","process_id":"26","session_id":"64204142.1a","session_line_num":"2","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.361 UTC","process_id":"26","session_id":"64204142.1a","session_line_num":"3","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.361 UTC","process_id":"26","session_id":"64204142.1a","session_line_num":"4","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"2023-03-26 12:57:38.361 UTC [26] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"2023-03-26 12:57:38.361 UTC [26] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","msg":"Instance is still down, will retry in 1 second","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"32bbc2f4-79f6-49a1-b674-a34e12d11bb9","uuid":"c9318ef7-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.367 UTC","process_id":"26","session_id":"64204142.1a","session_line_num":"5","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.374 UTC","process_id":"30","session_id":"64204142.1e","session_line_num":"1","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-26 12:57:04 UTC","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.507 UTC","process_id":"30","session_id":"64204142.1e","session_line_num":"2","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"entering standby mode","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.648 UTC","process_id":"30","session_id":"64204142.1e","session_line_num":"3","session_start_time":"2023-03-26 12:57:38 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"consistent recovery state reached at 0/50000A0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.648 UTC","process_id":"30","session_id":"64204142.1e","session_line_num":"4","session_start_time":"2023-03-26 12:57:38 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid record length at 0/50000A0: wanted 24, got 0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.648 UTC","process_id":"26","session_id":"64204142.1a","session_line_num":"6","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is ready to accept read-only connections","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.662 UTC","process_id":"46","session_id":"64204142.2e","session_line_num":"1","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"fetching timeline history file for timeline 2 from primary server","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.668 UTC","process_id":"46","session_id":"64204142.2e","session_line_num":"2","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"started streaming WAL from primary at 0/5000000 on timeline 1","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.668 UTC","process_id":"46","session_id":"64204142.2e","session_line_num":"3","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"replication terminated by primary server","detail":"End of WAL reached on timeline 1 at 0/50000A0.","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:38.668 UTC","process_id":"46","session_id":"64204142.2e","session_line_num":"4","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P01","message":"terminating walreceiver process due to administrator command","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:57:38Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:38Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7bd1447e-3ac5-4b27-b639-531e515a2a76","uuid":"c9aa9a10-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7bd1447e-3ac5-4b27-b639-531e515a2a76","uuid":"c9aa9a10-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:39Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:39.069 UTC","process_id":"30","session_id":"64204142.1e","session_line_num":"5","session_start_time":"2023-03-26 12:57:38 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"new target timeline is 2","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:39Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:39Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ef403a0d-70ee-4f39-8823-8a3beb8bf322","uuid":"c9cfc276-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ef403a0d-70ee-4f39-8823-8a3beb8bf322","uuid":"c9cfc276-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5cd52739-d51f-4090-87db-9e8aef763fab","uuid":"c9d75342-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5cd52739-d51f-4090-87db-9e8aef763fab","uuid":"c9d75342-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:39Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:39.349 UTC","process_id":"98","session_id":"64204143.62","session_line_num":"1","session_start_time":"2023-03-26 12:57:39 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"started streaming WAL from primary at 0/5000000 on timeline 2","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f2d6c2b4-3143-4ec8-8da0-63ba56f78a32","uuid":"c9df0797-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:39Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f2d6c2b4-3143-4ec8-8da0-63ba56f78a32","uuid":"c9df0797-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:40Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:40.354 UTC","process_id":"30","session_id":"64204142.1e","session_line_num":"6","session_start_time":"2023-03-26 12:57:38 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"redo starts at 0/50000A0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Received termination signal","logging_pod":"cluster-example-1","signal":"interrupt"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Requesting smart shutdown of the PostgreSQL instance","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"pg_ctl","msg":"pg_ctl: server is running (PID: 26)\n/usr/lib/postgresql/15/bin/postgres \"-D\" \"/var/lib/postgresql/data/pgdata\"\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Shutting down instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","mode":"smart","timeout":15}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:53.522 UTC","process_id":"26","session_id":"64204142.1a","session_line_num":"7","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"received smart shutdown request","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:53.528 UTC","process_id":"98","session_id":"64204143.62","session_line_num":"2","session_start_time":"2023-03-26 12:57:39 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P01","message":"terminating walreceiver process due to administrator command","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:53.531 UTC","process_id":"28","session_id":"64204142.1c","session_line_num":"1","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"shutting down","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:53.531 UTC","process_id":"28","session_id":"64204142.1c","session_line_num":"2","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"restartpoint starting: shutdown immediate","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:53Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"eda4219c-d7bf-4b2f-bf77-59397793abbc","uuid":"d2532544-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:53Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"eda4219c-d7bf-4b2f-bf77-59397793abbc","uuid":"d2532544-cbd5-11ed-a7b6-429a791395a4","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:53.563 UTC","process_id":"28","session_id":"64204142.1c","session_line_num":"3","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"restartpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.016 s, sync=0.005 s, total=0.033 s; sync files=4, longest=0.004 s, average=0.002 s; distance=0 kB, estimate=0 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:53.563 UTC","process_id":"28","session_id":"64204142.1c","session_line_num":"4","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"recovery restart point at 0/5000180","detail":"Last completed transaction was at log time 2023-03-26 12:57:08.488772+00.","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:53.568 UTC","process_id":"26","session_id":"64204142.1a","session_line_num":"8","session_start_time":"2023-03-26 12:57:38 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"postmaster has exited"}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7214833285902848020\nDatabase cluster state:               shut down in recovery\npg_control last modified:             Sun 26 Mar 2023 12:57:53 PM UTC\nLatest checkpoint location:           0/50001B8\nLatest checkpoint's REDO location:    0/5000180\nLatest checkpoint's REDO WAL file:    000000020000000000000005\nLatest checkpoint's TimeLineID:       2\nLatest checkpoint's PrevTimeLineID:   2\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:739\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  739\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sun 26 Mar 2023 12:57:08 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/5004D98\nMin recovery ending loc's timeline:   2\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b93c51965bd28e633e861cf1d7bf8b9788e5a288cb5f91888210c1e99527d770\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Instance is still down, will retry in 1 second","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"eda4219c-d7bf-4b2f-bf77-59397793abbc","uuid":"d2532544-cbd5-11ed-a7b6-429a791395a4","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"pg_ctl","msg":"waiting for server to shut down.... done","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"pg_ctl","msg":"server stopped","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"PostgreSQL instance shut down","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Stopping and waiting for non leader election runnables"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Stopping and waiting for leader election runnables"}
{"level":"info","ts":"2023-03-26T12:57:53Z","logger":"Replicator","msg":"Terminated slot Replicator loop","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Shutdown signal received, waiting for all workers to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Webserver exited","logging_pod":"cluster-example-1","address":"localhost:8010"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.json","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Exited log pipe","fileName":"/controller/log/postgres","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"All workers finished","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Webserver exited","logging_pod":"cluster-example-1","address":":9187"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Webserver exited","logging_pod":"cluster-example-1","address":":8000"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Stopping and waiting for caches"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Stopping and waiting for webhooks"}
{"level":"info","ts":"2023-03-26T12:57:53Z","msg":"Wait completed, proceeding to shutdown the manager"}
