{"level":"info","ts":"2023-03-26T12:38:14Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-1","version":"1.19.1","build":{"Version":"1.19.1","Commit":"cb24d237","Date":"2023-03-20"}}
{"level":"info","ts":"2023-03-26T12:38:14Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"debug","ts":"2023-03-26T12:38:14Z","msg":"starting the postgres loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:14Z","msg":"starting signal loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:14Z","msg":"Checking PGDATA coherence","caller":"internal/cmd/manager/instance/run/lifecycle/run.go:255","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":":9187"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":":8000"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":"localhost:8010"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"debug","ts":"2023-03-26T12:38:14Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"debug","ts":"2023-03-26T12:38:14Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","filename":"/controller/certificates/server.crt","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","filename":"/controller/certificates/server.key","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","filename":"/controller/certificates/streaming_replica.crt","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","filename":"/controller/certificates/streaming_replica.key","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-26T12:38:14Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","filename":"/controller/certificates/client-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","filename":"/controller/certificates/server-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Installed configuration file","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","filename":"pg_hba.conf"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Installed configuration file","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","filename":"custom.conf"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","currentPrimary":"","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"First primary instance bootstrap, marking myself as primary","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","currentPrimary":"","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"postmaster start up"}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7214833285902848020\nDatabase cluster state:               shut down\npg_control last modified:             Sun 26 Mar 2023 12:38:04 PM UTC\nLatest checkpoint location:           0/191C8C8\nLatest checkpoint's REDO location:    0/191C8C8\nLatest checkpoint's REDO WAL file:    000000010000000000000001\nLatest checkpoint's TimeLineID:       1\nLatest checkpoint's PrevTimeLineID:   1\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:726\nLatest checkpoint's NextOID:          16386\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sun 26 Mar 2023 12:38:03 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    replica\nwal_log_hints setting:                off\nmax_connections setting:              100\nmax_worker_processes setting:         8\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b93c51965bd28e633e861cf1d7bf8b9788e5a288cb5f91888210c1e99527d770\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"The PID file content is wrong, deleting it and assuming it's stale","file":"/var/lib/postgresql/data/pgdata/postmaster.pid","logging_pod":"cluster-example-1","err":"file does not exist","pidFileContents":""}
{"level":"debug","ts":"2023-03-26T12:38:15Z","msg":"Verifying connection to DB","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"DB not available, will retry","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Instance is still down, will retry in 1 second","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d635958-be21-404d-bcf5-5bf1eecd37e7","uuid":"13d06049-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:15Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5b910d6c-28a8-467f-acf1-d0cb4382e8f3","uuid":"13ebdffa-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"debug","ts":"2023-03-26T12:38:15Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5b910d6c-28a8-467f-acf1-d0cb4382e8f3","uuid":"13ebdffa-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"2023-03-26 12:38:15.135 UTC [21] LOG:  redirecting log output to logging collector process","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"2023-03-26 12:38:15.135 UTC [21] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"2023-03-26 12:38:15.135 UTC [21] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"2023-03-26 12:38:15.135 UTC [21] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.135 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"1","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.135 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"2","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.136 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"3","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.136 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"4","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.141 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"5","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.158 UTC","process_id":"26","session_id":"64203cb7.1a","session_line_num":"1","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-26 12:38:04 UTC","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.161 UTC","user_name":"postgres","database_name":"postgres","process_id":"27","connection_from":"[local]","session_id":"64203cb7.1b","session_line_num":"1","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is starting up","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.163 UTC","user_name":"postgres","database_name":"postgres","process_id":"28","connection_from":"[local]","session_id":"64203cb7.1c","session_line_num":"1","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is starting up","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"DB not available, will retry","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5b910d6c-28a8-467f-acf1-d0cb4382e8f3","uuid":"13ebdffa-cbd3-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-26T12:38:15Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:15.172 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"6","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is ready to accept connections","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Readiness probe failing","logging_pod":"cluster-example-1","err":"instance is not ready yet"}
{"level":"debug","ts":"2023-03-26T12:38:15Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"74443ecd-a917-4ef6-9b52-225b91f639e9","uuid":"1446ff1b-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"debug","ts":"2023-03-26T12:38:15Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"74443ecd-a917-4ef6-9b52-225b91f639e9","uuid":"1446ff1b-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"debug","ts":"2023-03-26T12:38:15Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b8e11d3b-3fbd-4fff-90fd-f242238e631e","uuid":"1467665e-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"debug","ts":"2023-03-26T12:38:15Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b8e11d3b-3fbd-4fff-90fd-f242238e631e","uuid":"1467665e-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:15Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"debug","ts":"2023-03-26T12:38:16Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"11d88321-62ec-49d8-8d99-bb39ed4d7955","uuid":"14848f1f-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"info","ts":"2023-03-26T12:38:16Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"debug","ts":"2023-03-26T12:38:16Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"11d88321-62ec-49d8-8d99-bb39ed4d7955","uuid":"14848f1f-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:16Z","msg":"Ignore minSyncReplicas to enforce self-healing","logging_pod":"cluster-example-1","syncReplicas":-1,"minSyncReplicas":0,"maxSyncReplicas":0}
{"level":"info","ts":"2023-03-26T12:38:16Z","msg":"Readiness probe failing","logging_pod":"cluster-example-1","err":"instance is not ready yet"}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Validating DB configuration","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d0baef94-92d2-4564-88e7-53acb808c1d5","uuid":"16f5d2ce-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d0baef94-92d2-4564-88e7-53acb808c1d5","uuid":"16f5d2ce-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2cbf8001-d22e-4c73-ad7f-c4e794332480","uuid":"1702b4d8-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2cbf8001-d22e-4c73-ad7f-c4e794332480","uuid":"1702b4d8-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5e670dd6-39c2-4584-af8a-093f37fdf1c3","uuid":"170eee97-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5e670dd6-39c2-4584-af8a-093f37fdf1c3","uuid":"170eee97-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2a41f93a-3d56-4951-9e05-8224d9d83b21","uuid":"17245053-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:20Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2a41f93a-3d56-4951-9e05-8224d9d83b21","uuid":"17245053-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:27Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:27.515 UTC","process_id":"24","session_id":"64203cb7.18","session_line_num":"1","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: force wait","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:38:27Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:27Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-1","walName":"pg_wal/000000010000000000000001","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:30Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:38:30.060 UTC","process_id":"24","session_id":"64203cb7.18","session_line_num":"2","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 18 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.510 s, sync=0.021 s, total=2.546 s; sync files=15, longest=0.014 s, average=0.002 s; distance=7053 kB, estimate=7053 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:38:36Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:36Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-1","walName":"pg_wal/000000010000000000000002","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:36Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:38:36Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-1","walName":"pg_wal/000000010000000000000002.00000028.backup","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:43Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2f468ebf-c27f-4d8c-bf73-538e0d545e3b","uuid":"24912893-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:43Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2f468ebf-c27f-4d8c-bf73-538e0d545e3b","uuid":"24912893-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:43Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"eafc8c18-80f6-4703-a346-b01959689cfb","uuid":"249e4d74-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:43Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"eafc8c18-80f6-4703-a346-b01959689cfb","uuid":"249e4d74-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e153e83c-e6a6-47c6-90c2-565184e6c7d1","uuid":"278b7a8c-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e153e83c-e6a6-47c6-90c2-565184e6c7d1","uuid":"278b7a8c-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"84fcfdda-b6dc-49f8-a3a6-0b2970d8e320","uuid":"27b79190-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"84fcfdda-b6dc-49f8-a3a6-0b2970d8e320","uuid":"27b79190-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"92c8cc14-d55a-4861-88ea-370d856362d6","uuid":"27c08077-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"92c8cc14-d55a-4861-88ea-370d856362d6","uuid":"27c08077-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"60c2a5ba-13c6-4e4a-b8f8-2ef2a76ac67d","uuid":"27c9be7a-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"60c2a5ba-13c6-4e4a-b8f8-2ef2a76ac67d","uuid":"27c9be7a-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d4f20308-213e-45c1-9515-87d1d26219ae","uuid":"27e046ee-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:38:48Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d4f20308-213e-45c1-9515-87d1d26219ae","uuid":"27e046ee-cbd3-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:43:27Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:43:27.163 UTC","process_id":"24","session_id":"64203cb7.18","session_line_num":"3","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: time","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:43:31Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:43:31.233 UTC","process_id":"24","session_id":"64203cb7.18","session_line_num":"4","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 41 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.014 s, sync=0.020 s, total=4.070 s; sync files=10, longest=0.018 s, average=0.002 s; distance=16709 kB, estimate=16709 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:43:37Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:43:37Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-1","walName":"pg_wal/000000010000000000000003","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:02Z","msg":"Received termination signal","logging_pod":"cluster-example-1","signal":"interrupt"}
{"level":"info","ts":"2023-03-26T12:57:02Z","msg":"Requesting smart shutdown of the PostgreSQL instance","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"pg_ctl","msg":"pg_ctl: server is running (PID: 21)\n/usr/lib/postgresql/15/bin/postgres \"-D\" \"/var/lib/postgresql/data/pgdata\"\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:02Z","msg":"Shutting down instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","mode":"smart","timeout":15}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.246 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"7","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"received smart shutdown request","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.260 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"8","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"background worker \"logical replication launcher\" (PID 32) exited with exit code 1","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.260 UTC","process_id":"24","session_id":"64203cb7.18","session_line_num":"5","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"shutting down","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:02Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c1ee687d-1029-4e75-afbc-ee7a168fad5a","uuid":"b3ccd71f-cbd5-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:02Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c1ee687d-1029-4e75-afbc-ee7a168fad5a","uuid":"b3ccd71f-cbd5-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.379 UTC","user_name":"postgres","database_name":"postgres","process_id":"788","connection_from":"[local]","session_id":"6420411e.314","session_line_num":"1","session_start_time":"2023-03-26 12:57:02 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is shutting down","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:02Z","msg":"DB not available, will retry","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c1ee687d-1029-4e75-afbc-ee7a168fad5a","uuid":"b3ccd71f-cbd5-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is shutting down (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.381 UTC","user_name":"postgres","database_name":"postgres","process_id":"789","connection_from":"[local]","session_id":"6420411e.315","session_line_num":"1","session_start_time":"2023-03-26 12:57:02 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is shutting down","backend_type":"client backend","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:02Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c33b7a7e-959d-462a-b0bb-32f78c8f60ae","uuid":"b3d977de-cbd5-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:02Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c33b7a7e-959d-462a-b0bb-32f78c8f60ae","uuid":"b3d977de-cbd5-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.488 UTC","user_name":"postgres","database_name":"postgres","process_id":"791","connection_from":"[local]","session_id":"6420411e.317","session_line_num":"1","session_start_time":"2023-03-26 12:57:02 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is shutting down","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:02Z","msg":"DB not available, will retry","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c33b7a7e-959d-462a-b0bb-32f78c8f60ae","uuid":"b3d977de-cbd5-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is shutting down (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.491 UTC","user_name":"postgres","database_name":"postgres","process_id":"792","connection_from":"[local]","session_id":"6420411e.318","session_line_num":"1","session_start_time":"2023-03-26 12:57:02 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is shutting down","backend_type":"client backend","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:02Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fe2b7902-cff3-4afd-90f8-e932d257c314","uuid":"b3e45c6c-cbd5-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T12:57:02Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fe2b7902-cff3-4afd-90f8-e932d257c314","uuid":"b3e45c6c-cbd5-11ed-a286-4ad753012da1","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.552 UTC","user_name":"postgres","database_name":"postgres","process_id":"794","connection_from":"[local]","session_id":"6420411e.31a","session_line_num":"1","session_start_time":"2023-03-26 12:57:02 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is shutting down","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:02Z","msg":"This is an old primary node. Requesting a checkpoint before demotion","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fe2b7902-cff3-4afd-90f8-e932d257c314","uuid":"b3e45c6c-cbd5-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:02Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:02.554 UTC","user_name":"postgres","database_name":"postgres","process_id":"795","connection_from":"[local]","session_id":"6420411e.31b","session_line_num":"1","session_start_time":"2023-03-26 12:57:02 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P03","message":"the database system is shutting down","backend_type":"client backend","query_id":"0"}}
{"level":"error","ts":"2023-03-26T12:57:02Z","msg":"Error while requesting a checkpoint","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fe2b7902-cff3-4afd-90f8-e932d257c314","uuid":"b3e45c6c-cbd5-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1","error":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is shutting down (SQLSTATE 57P03))","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).reconcileOldPrimary\n\tinternal/management/controller/instance_controller.go:424\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:187\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-26T12:57:02Z","msg":"This is an old primary node. Shutting it down to get it demoted to a replica","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fe2b7902-cff3-4afd-90f8-e932d257c314","uuid":"b3e45c6c-cbd5-11ed-a286-4ad753012da1","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:03.265 UTC","process_id":"24","session_id":"64203cb7.18","session_line_num":"6","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: shutdown immediate","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T12:57:03Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:03Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-1","walName":"pg_wal/000000010000000000000004","currentPrimary":"cluster-example-1","targetPrimary":"pending"}
{"level":"info","ts":"2023-03-26T12:57:04Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:04.386 UTC","process_id":"24","session_id":"64203cb7.18","session_line_num":"7","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 0 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.001 s, sync=0.001 s, total=1.128 s; sync files=0, longest=0.000 s, average=0.000 s; distance=32442 kB, estimate=32442 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:06Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 12:57:06.561 UTC","process_id":"21","session_id":"64203cb7.15","session_line_num":"9","session_start_time":"2023-03-26 12:38:15 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is shut down","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"postmaster has exited"}
{"level":"info","ts":"2023-03-26T12:57:06Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7214833285902848020\nDatabase cluster state:               shut down\npg_control last modified:             Sun 26 Mar 2023 12:57:04 PM UTC\nLatest checkpoint location:           0/5000028\nLatest checkpoint's REDO location:    0/5000028\nLatest checkpoint's REDO WAL file:    000000010000000000000005\nLatest checkpoint's TimeLineID:       1\nLatest checkpoint's PrevTimeLineID:   1\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:739\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sun 26 Mar 2023 12:57:03 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b93c51965bd28e633e861cf1d7bf8b9788e5a288cb5f91888210c1e99527d770\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:06Z","logger":"pg_ctl","msg":"waiting for server to shut down........ done","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:06Z","logger":"pg_ctl","msg":"server stopped","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"PostgreSQL instance shut down","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Stopping and waiting for non leader election runnables"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Stopping and waiting for leader election runnables"}
{"level":"info","ts":"2023-03-26T12:57:06Z","logger":"Replicator","msg":"Terminated slot Replicator loop","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Shutdown signal received, waiting for all workers to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.json","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Webserver exited","logging_pod":"cluster-example-1","address":"localhost:8010"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Webserver exited","logging_pod":"cluster-example-1","address":":8000"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Webserver exited","logging_pod":"cluster-example-1","address":":9187"}
{"level":"info","ts":"2023-03-26T12:57:06Z","msg":"Exited log pipe","fileName":"/controller/log/postgres","logging_pod":"cluster-example-1"}
