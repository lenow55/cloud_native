{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-1","version":"1.19.1","build":{"Version":"1.19.0+dev100","Commit":"ae4c6fda","Date":"2023-03-23"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":":9187"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"roles_reconciler","msg":"starting up the runnable","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"roles_reconciler","msg":"setting up RoleSynchronizer loop","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":"localhost:8010"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":":8000"}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"starting the postgres loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"starting signal loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Checking PGDATA coherence","caller":"internal/cmd/manager/instance/run/lifecycle/run.go:255","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","filename":"/controller/certificates/server.crt","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","filename":"/controller/certificates/server.key","secret":"cluster-example-server"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","filename":"/controller/certificates/streaming_replica.crt","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","filename":"/controller/certificates/streaming_replica.key","secret":"cluster-example-replication"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","filename":"/controller/certificates/client-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Refreshed configuration file","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","filename":"/controller/certificates/server-ca.crt","secret":"cluster-example-ca"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-3","targetPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-3","currentPrimary":"cluster-example-3"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7214847947255496726\nDatabase cluster state:               shut down\npg_control last modified:             Sun 26 Mar 2023 05:06:29 PM UTC\nLatest checkpoint location:           0/10000028\nLatest checkpoint's REDO location:    0/10000028\nLatest checkpoint's REDO WAL file:    000000030000000000000010\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sun 26 Mar 2023 05:06:28 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            c953465ac918c0a055d07bf03b41423f2d229db5472e9ce8be3b0d79d8a0498a\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--debug","--restore-target-wal"]}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: using for rewind restore_command = '/controller/manager wal-restore --log-destination /controller/log/postgres.json %f %p'","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: fetched file \"global/pg_control\", length 8192","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: fetched file \"pg_wal/00000004.history\", length 126","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: Source timeline history:","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: Target timeline history:","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: 1: 0/0 - 0/90000A0","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: 2: 0/90000A0 - 0/B000C00","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: 3: 0/B000C00 - 0/0","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: servers diverged at WAL location 0/100000A0 on timeline 3","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_rewind","msg":"pg_rewind: no rewind required","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Demoting instance","logging_pod":"cluster-example-1","pgpdata":"/var/lib/postgresql/data/pgdata"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"postmaster start up"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7214847947255496726\nDatabase cluster state:               shut down\npg_control last modified:             Sun 26 Mar 2023 05:06:29 PM UTC\nLatest checkpoint location:           0/10000028\nLatest checkpoint's REDO location:    0/10000028\nLatest checkpoint's REDO WAL file:    000000030000000000000010\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sun 26 Mar 2023 05:06:28 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            c953465ac918c0a055d07bf03b41423f2d229db5472e9ce8be3b0d79d8a0498a\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"The PID file content is wrong, deleting it and assuming it's stale","file":"/var/lib/postgresql/data/pgdata/postmaster.pid","logging_pod":"cluster-example-1","err":"file does not exist","pidFileContents":""}
{"level":"info","ts":"2023-03-26T17:07:03Z","msg":"Instance is still down, will retry in 1 second","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d7ee5657-b9f5-4539-a055-7070a8c34d4f","uuid":"a103736f-cbf8-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"2023-03-26 17:07:03.324 UTC [26] LOG:  redirecting log output to logging collector process","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"2023-03-26 17:07:03.324 UTC [26] HINT:  Future log output will appear in directory \"/controller/log\".","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"2023-03-26 17:07:03.324 UTC [26] LOG:  ending log output to stderr","source":"/controller/log/postgres","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"2023-03-26 17:07:03.324 UTC [26] HINT:  Future log output will go to log destination \"csvlog\".","source":"/controller/log/postgres","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.324 UTC","process_id":"26","session_id":"64207bb7.1a","session_line_num":"1","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"ending log output to stderr","hint":"Future log output will go to log destination \"csvlog\".","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.324 UTC","process_id":"26","session_id":"64207bb7.1a","session_line_num":"2","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.325 UTC","process_id":"26","session_id":"64207bb7.1a","session_line_num":"3","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv4 address \"0.0.0.0\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.325 UTC","process_id":"26","session_id":"64207bb7.1a","session_line_num":"4","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on IPv6 address \"::\", port 5432","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.331 UTC","process_id":"26","session_id":"64207bb7.1a","session_line_num":"5","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.340 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"1","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system was shut down at 2023-03-26 17:06:29 UTC","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.473 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"2","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"entering standby mode","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.748 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"3","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"consistent recovery state reached at 0/100000A0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.748 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"4","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"invalid record length at 0/100000A0: wanted 24, got 0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.748 UTC","process_id":"26","session_id":"64207bb7.1a","session_line_num":"6","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is ready to accept read-only connections","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.764 UTC","process_id":"56","session_id":"64207bb7.38","session_line_num":"1","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"fetching timeline history file for timeline 4 from primary server","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.771 UTC","process_id":"56","session_id":"64207bb7.38","session_line_num":"2","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"started streaming WAL from primary at 0/10000000 on timeline 3","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.771 UTC","process_id":"56","session_id":"64207bb7.38","session_line_num":"3","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"replication terminated by primary server","detail":"End of WAL reached on timeline 3 at 0/100000A0.","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:03.771 UTC","process_id":"56","session_id":"64207bb7.38","session_line_num":"4","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P01","message":"terminating walreceiver process due to administrator command","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:03Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5dd33200-51c3-444a-aa1b-bc113a55aec8","uuid":"a17b5b13-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:07:03Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"5dd33200-51c3-444a-aa1b-bc113a55aec8","uuid":"a17b5b13-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:04Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:04Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:04.178 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"5","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"new target timeline is 4","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:04Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"941ce1ae-3d6e-4002-b05b-0202a74ef477","uuid":"a1a53792-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"941ce1ae-3d6e-4002-b05b-0202a74ef477","uuid":"a1a53792-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4342dcbe-6d5d-46fd-8086-f17052877d0c","uuid":"a1ae7c3d-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4342dcbe-6d5d-46fd-8086-f17052877d0c","uuid":"a1ae7c3d-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:04Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d12136a9-7871-4bc1-95cf-3e8a5a42112d","uuid":"a1bbbdd9-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:07:04Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d12136a9-7871-4bc1-95cf-3e8a5a42112d","uuid":"a1bbbdd9-cbf8-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:07:04Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:04.466 UTC","process_id":"111","session_id":"64207bb8.6f","session_line_num":"1","session_start_time":"2023-03-26 17:07:04 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"started streaming WAL from primary at 0/10000000 on timeline 4","backend_type":"walreceiver","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:07:05Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:07:05.475 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"6","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"redo starts at 0/100000A0","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:12:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:12:03.385 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"1","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"restartpoint starting: time","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:12:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:12:03.536 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"2","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"restartpoint complete: wrote 3 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.112 s, sync=0.015 s, total=0.152 s; sync files=2, longest=0.010 s, average=0.008 s; distance=4 kB, estimate=4 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:12:03Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:12:03.536 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"3","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"recovery restart point at 0/10001410","detail":"Last completed transaction was at log time 2023-03-26 17:06:32.827342+00.","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:21:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:21:34.026 UTC","process_id":"111","session_id":"64207bb8.6f","session_line_num":"2","session_start_time":"2023-03-26 17:07:04 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"08P01","message":"could not receive data from WAL stream: FATAL:  terminating connection due to administrator command","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:21:34Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:34Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:21:34Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:34Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:21:34.301 UTC","process_id":"676","session_id":"64207f1e.2a4","session_line_num":"1","session_start_time":"2023-03-26 17:21:34 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"08006","message":"could not connect to the primary server: connection to server at \"cluster-example-rw\" (10.103.179.133), port 5432 failed: FATAL:  the database system is shutting down","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:21:34Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:34Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:34Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:21:34.434 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"7","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"waiting for WAL to become available at 0/12000018","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:21:39Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:39Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:59Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:21:59.321 UTC","process_id":"730","session_id":"64207f23.2da","session_line_num":"1","session_start_time":"2023-03-26 17:21:39 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"08006","message":"could not connect to the primary server: could not translate host name \"cluster-example-rw\" to address: Temporary failure in name resolution","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:21:59Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:59Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:21:59Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:21:59Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f5f1d2ce-b154-44d4-a7e4-c73411494b35","uuid":"bd9cbdcf-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f5f1d2ce-b154-44d4-a7e4-c73411494b35","uuid":"bd9cbdcf-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"02809f8b-4356-4a5e-ae61-bdfbc5055534","uuid":"bda4b867-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"02809f8b-4356-4a5e-ae61-bdfbc5055534","uuid":"bda4b867-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"35aba760-04c8-4786-a24a-3726649ebf13","uuid":"bdac853d-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"35aba760-04c8-4786-a24a-3726649ebf13","uuid":"bdac853d-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","msg":"Setting myself as primary","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"35aba760-04c8-4786-a24a-3726649ebf13","uuid":"bdac853d-cbfa-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","phase":"Failing over","currentTimestamp":"2023-03-26T17:22:10.332097Z","targetPrimaryTimestamp":"2023-03-26T17:22:10.256211Z","currentPrimaryTimestamp":"2023-03-26T17:06:32.772838Z","msPassedSinceTargetPrimaryTimestamp":75,"msPassedSinceCurrentPrimaryTimestamp":937559,"msDifferenceBetweenCurrentAndTargetPrimary":-937483}
{"level":"info","ts":"2023-03-26T17:22:10Z","msg":"I'm the target primary, wait for the wal_receiver to be terminated","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"35aba760-04c8-4786-a24a-3726649ebf13","uuid":"bdac853d-cbfa-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","msg":"I'm the target primary, applying WALs and promoting my instance","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"35aba760-04c8-4786-a24a-3726649ebf13","uuid":"bdac853d-cbfa-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"promote"}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7214847947255496726\nDatabase cluster state:               in archive recovery\npg_control last modified:             Sun 26 Mar 2023 05:17:03 PM UTC\nLatest checkpoint location:           0/11000060\nLatest checkpoint's REDO location:    0/10001410\nLatest checkpoint's REDO WAL file:    000000040000000000000010\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:742\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  742\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Sun 26 Mar 2023 05:11:32 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/12000000\nMin recovery ending loc's timeline:   4\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            c953465ac918c0a055d07bf03b41423f2d229db5472e9ce8be3b0d79d8a0498a\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","msg":"Promoting instance","logging_pod":"cluster-example-1","pgctl_options":["-D","/var/lib/postgresql/data/pgdata","-w","promote","-t 40000000"]}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:10.337 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"8","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"received promote request","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:10.338 UTC","process_id":"894","session_id":"64207f37.37e","session_line_num":"1","session_start_time":"2023-03-26 17:21:59 UTC","transaction_id":"0","error_severity":"FATAL","sql_state_code":"57P01","message":"terminating walreceiver process due to administrator command","backend_type":"walreceiver","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:10.608 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"9","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"redo done at 0/11000110 system usage: CPU: user: 0.01 s, system: 0.00 s, elapsed: 905.13 s","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:10.608 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"10","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"last completed transaction was at log time 2023-03-26 17:06:32.827342+00","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:22:10Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:10Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:10.886 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"11","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"selected new timeline ID: 5","backend_type":"startup","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:22:11Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:11Z","logger":"wal-restore","msg":"tried restoring WALs, but no backup was configured","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:12.024 UTC","process_id":"31","session_id":"64207bb7.1f","session_line_num":"12","session_start_time":"2023-03-26 17:07:03 UTC","virtual_transaction_id":"1/0","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"archive recovery complete","backend_type":"startup","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:12.031 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"4","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: force","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:12.034 UTC","process_id":"26","session_id":"64207bb7.1a","session_line_num":"7","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"database system is ready to accept connections","backend_type":"postmaster","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"pg_ctl","msg":"waiting for server to promote..... done","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"pg_ctl","msg":"server promoted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:12Z","msg":"Requesting a checkpoint","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:12.052 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"5","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.007 s, sync=0.003 s, total=0.021 s; sync files=2, longest=0.002 s, average=0.002 s; distance=32763 kB, estimate=32763 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:12.052 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"6","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: immediate force wait","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:22:12.062 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"7","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 0 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.001 s, sync=0.001 s, total=0.011 s; sync files=0, longest=0.000 s, average=0.000 s; distance=0 kB, estimate=29486 kB","backend_type":"checkpointer","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:22:12Z","msg":"The PostgreSQL instance has been promoted successfully","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:22:12Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:12Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-1","walName":"pg_wal/00000005.history","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:22:12Z","msg":"Finished setting myself as primary","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"35aba760-04c8-4786-a24a-3726649ebf13","uuid":"bdac853d-cbfa-11ed-a6ba-4e0eb0dd3729","logging_pod":"cluster-example-1","phase":"Failing over","currentTimestamp":"2023-03-26T17:22:12.082089Z","targetPrimaryTimestamp":"2023-03-26T17:22:10.256211Z","currentPrimaryTimestamp":"2023-03-26T17:22:12.063139Z","msPassedSinceTargetPrimaryTimestamp":1825,"msPassedSinceCurrentPrimaryTimestamp":18,"msDifferenceBetweenCurrentAndTargetPrimary":1806}
{"level":"debug","ts":"2023-03-26T17:22:12Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"76a8ce03-e55b-45ab-8bd1-ace9a045dd70","uuid":"bec65ad5-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:22:12Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"76a8ce03-e55b-45ab-8bd1-ace9a045dd70","uuid":"bec65ad5-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:22:14Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fa0aa508-3a27-430d-bc9c-6a1616a5c62e","uuid":"bffbfb43-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:22:14Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fa0aa508-3a27-430d-bc9c-6a1616a5c62e","uuid":"bffbfb43-cbfa-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:25:31Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2d655dac-4c40-425b-ac04-b240f77caf91","uuid":"357d9739-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:25:31Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"2d655dac-4c40-425b-ac04-b240f77caf91","uuid":"357d9739-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:25:58Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f53dc04a-5f8d-4f2c-bee8-e1a5c6374934","uuid":"45ba8a30-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:25:58Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f53dc04a-5f8d-4f2c-bee8-e1a5c6374934","uuid":"45ba8a30-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:25:58Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"10db93d6-7716-45af-aec1-996f9e7420cd","uuid":"45ca2681-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:25:58Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"10db93d6-7716-45af-aec1-996f9e7420cd","uuid":"45ca2681-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:26:12Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d5772b08-b574-4ce1-bced-1fc3fd9df3ca","uuid":"4e17935c-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:26:12Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d5772b08-b574-4ce1-bced-1fc3fd9df3ca","uuid":"4e17935c-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-26T17:26:14Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"727a65ed-3635-40ae-b6f8-27b597be309d","uuid":"4f1f79d1-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:110","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-26T17:26:14Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"727a65ed-3635-40ae-b6f8-27b597be309d","uuid":"4f1f79d1-cbfb-11ed-a6ba-4e0eb0dd3729","caller":"internal/management/controller/instance_controller.go:735","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:26:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:26:16.024 UTC","user_name":"streaming_replica","database_name":"postgres","process_id":"3468","connection_from":"10.40.1.30:39586","session_id":"64208037.d8c","session_line_num":"1","command_tag":"SELECT","session_start_time":"2023-03-26 17:26:15 UTC","virtual_transaction_id":"3/1932","transaction_id":"0","error_severity":"LOG","sql_state_code":"08006","message":"could not send data to client: Connection reset by peer","query":"SELECT path, begin,\n  pg_read_binary_file(path, begin, len, true) AS chunk\nFROM unnest ($1::text[], $2::int8[], $3::int4[]) as x(path, begin, len)","application_name":"cluster-example-3","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:26:16Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:26:16.024 UTC","user_name":"streaming_replica","database_name":"postgres","process_id":"3468","connection_from":"10.40.1.30:39586","session_id":"64208037.d8c","session_line_num":"2","command_tag":"SELECT","session_start_time":"2023-03-26 17:26:15 UTC","virtual_transaction_id":"3/1932","transaction_id":"0","error_severity":"FATAL","sql_state_code":"08006","message":"connection to client lost","query":"SELECT path, begin,\n  pg_read_binary_file(path, begin, len, true) AS chunk\nFROM unnest ($1::text[], $2::int8[], $3::int4[]) as x(path, begin, len)","application_name":"cluster-example-3","backend_type":"client backend","query_id":"0"}}
{"level":"info","ts":"2023-03-26T17:27:12Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:27:12.109 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"8","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint starting: time","backend_type":"checkpointer","query_id":"0"}}
{"level":"debug","ts":"2023-03-26T17:27:13Z","msg":"Cached object request received","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:27:13Z","logger":"wal-archive","msg":"Backup not configured, skip WAL archiving","logging_pod":"cluster-example-1","walName":"pg_wal/000000050000000000000012","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-26T17:27:14Z","logger":"postgres","msg":"record","logging_pod":"cluster-example-1","record":{"log_time":"2023-03-26 17:27:14.309 UTC","process_id":"29","session_id":"64207bb7.1d","session_line_num":"9","session_start_time":"2023-03-26 17:07:03 UTC","transaction_id":"0","error_severity":"LOG","sql_state_code":"00000","message":"checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.083 s, sync=0.003 s, total=2.200 s; sync files=2, longest=0.002 s, average=0.002 s; distance=5 kB, estimate=26538 kB","backend_type":"checkpointer","query_id":"0"}}
