{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-3","version":"1.19.0","build":{"Version":"1.19.0+dev50","Commit":"7d527e90","Date":"2023-03-03"}}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":":9187"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":":8000"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting webserver","logging_pod":"cluster-example-3","address":"localhost:8010"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a765aeb2-d560-406a-b192-ec0570244a3a","uuid":"0676731e-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a765aeb2-d560-406a-b192-ec0570244a3a","uuid":"0676731e-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a765aeb2-d560-406a-b192-ec0570244a3a","uuid":"0676731e-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:47Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a765aeb2-d560-406a-b192-ec0570244a3a","uuid":"0676731e-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:47.657 GMT [26] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.657 GMT [26] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.657 GMT [26] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.665 GMT [26] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.669 GMT [26] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.674 GMT [29] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.674 GMT [29] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.674 GMT [29] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.762 GMT [26] LOG:  startup process (PID 29) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.762 GMT [26] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.763 GMT [26] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:47Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"a765aeb2-d560-406a-b192-ec0570244a3a","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d03864b5-4352-4e8a-a395-c20a3ae8c626","uuid":"069eae19-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d03864b5-4352-4e8a-a395-c20a3ae8c626","uuid":"069eae19-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d03864b5-4352-4e8a-a395-c20a3ae8c626","uuid":"069eae19-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:47Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d03864b5-4352-4e8a-a395-c20a3ae8c626","uuid":"069eae19-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:47.920 GMT [40] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.920 GMT [40] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.920 GMT [40] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.933 GMT [40] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.938 GMT [40] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.938 GMT [40] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.938 GMT [40] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.939 GMT [40] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.939 GMT [40] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.939 GMT [40] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.939 GMT [40] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.939 GMT [40] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.939 GMT [40] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.945 GMT [43] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.945 GMT [43] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:47Z","logger":"pg_ctl","msg":"2023-03-23 09:56:47.945 GMT [43] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.036 GMT [40] LOG:  startup process (PID 43) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.036 GMT [40] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.037 GMT [40] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:48Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d03864b5-4352-4e8a-a395-c20a3ae8c626","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0bfa3171-9918-4a84-98ae-6c68346f981f","uuid":"06c79bec-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0bfa3171-9918-4a84-98ae-6c68346f981f","uuid":"06c79bec-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0bfa3171-9918-4a84-98ae-6c68346f981f","uuid":"06c79bec-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:48Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0bfa3171-9918-4a84-98ae-6c68346f981f","uuid":"06c79bec-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:48.190 GMT [54] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.190 GMT [54] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.190 GMT [54] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.195 GMT [54] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.198 GMT [54] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.204 GMT [57] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.204 GMT [57] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.204 GMT [57] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.298 GMT [54] LOG:  startup process (PID 57) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.298 GMT [54] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.298 GMT [54] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:48Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0bfa3171-9918-4a84-98ae-6c68346f981f","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"184bd26b-1e47-4948-9954-baed5ce38604","uuid":"06f2905c-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"184bd26b-1e47-4948-9954-baed5ce38604","uuid":"06f2905c-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"184bd26b-1e47-4948-9954-baed5ce38604","uuid":"06f2905c-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:48Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"184bd26b-1e47-4948-9954-baed5ce38604","uuid":"06f2905c-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:48.472 GMT [68] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.472 GMT [68] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.473 GMT [68] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.478 GMT [68] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.482 GMT [68] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.482 GMT [68] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.482 GMT [68] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.483 GMT [68] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.483 GMT [68] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.483 GMT [68] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.483 GMT [68] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.483 GMT [68] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.483 GMT [68] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.487 GMT [71] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.487 GMT [71] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.487 GMT [71] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.570 GMT [68] LOG:  startup process (PID 71) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.570 GMT [68] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.571 GMT [68] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:48Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"184bd26b-1e47-4948-9954-baed5ce38604","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ff63b405-e373-461d-9b13-c25adcf0a113","uuid":"07206119-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ff63b405-e373-461d-9b13-c25adcf0a113","uuid":"07206119-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ff63b405-e373-461d-9b13-c25adcf0a113","uuid":"07206119-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:48Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ff63b405-e373-461d-9b13-c25adcf0a113","uuid":"07206119-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:48.764 GMT [82] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.764 GMT [82] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.764 GMT [82] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.770 GMT [82] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.773 GMT [82] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.776 GMT [85] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.776 GMT [85] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.776 GMT [85] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.839 GMT [86] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.868 GMT [82] LOG:  startup process (PID 85) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.868 GMT [82] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"2023-03-23 09:56:48.868 GMT [82] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:48Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ff63b405-e373-461d-9b13-c25adcf0a113","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"438ef0a6-33bb-4575-bb91-bc803d310579","uuid":"075361aa-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"438ef0a6-33bb-4575-bb91-bc803d310579","uuid":"075361aa-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"438ef0a6-33bb-4575-bb91-bc803d310579","uuid":"075361aa-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:49Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"438ef0a6-33bb-4575-bb91-bc803d310579","uuid":"075361aa-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:49.109 GMT [97] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.109 GMT [97] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.109 GMT [97] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.114 GMT [97] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.117 GMT [97] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.117 GMT [97] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.117 GMT [97] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.117 GMT [97] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.117 GMT [97] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.117 GMT [97] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.118 GMT [97] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.118 GMT [97] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.118 GMT [97] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.121 GMT [100] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.122 GMT [100] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.122 GMT [100] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.210 GMT [97] LOG:  startup process (PID 100) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.210 GMT [97] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.211 GMT [97] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:49Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"438ef0a6-33bb-4575-bb91-bc803d310579","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96541c31-f235-4ffa-a9f0-cc65e8507f37","uuid":"0794270b-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96541c31-f235-4ffa-a9f0-cc65e8507f37","uuid":"0794270b-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96541c31-f235-4ffa-a9f0-cc65e8507f37","uuid":"0794270b-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:49Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96541c31-f235-4ffa-a9f0-cc65e8507f37","uuid":"0794270b-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:49.521 GMT [111] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.522 GMT [111] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.522 GMT [111] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.528 GMT [111] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.533 GMT [111] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.537 GMT [114] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.538 GMT [114] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.538 GMT [114] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.623 GMT [111] LOG:  startup process (PID 114) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.623 GMT [111] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"2023-03-23 09:56:49.624 GMT [111] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:49Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:49Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96541c31-f235-4ffa-a9f0-cc65e8507f37","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1d400973-748a-4ce6-b71a-f2865ec4ecd6","uuid":"07ebae75-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1d400973-748a-4ce6-b71a-f2865ec4ecd6","uuid":"07ebae75-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1d400973-748a-4ce6-b71a-f2865ec4ecd6","uuid":"07ebae75-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:50Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1d400973-748a-4ce6-b71a-f2865ec4ecd6","uuid":"07ebae75-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:50.094 GMT [125] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.095 GMT [125] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.095 GMT [125] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.101 GMT [125] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.105 GMT [125] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.105 GMT [125] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.105 GMT [125] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.105 GMT [125] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.105 GMT [125] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.105 GMT [125] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.106 GMT [125] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.106 GMT [125] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.106 GMT [125] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.112 GMT [128] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.112 GMT [128] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.112 GMT [128] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.200 GMT [125] LOG:  startup process (PID 128) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.200 GMT [125] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"2023-03-23 09:56:50.200 GMT [125] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:50Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"1d400973-748a-4ce6-b71a-f2865ec4ecd6","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"207c6a0f-0b64-41d7-9771-25552117d31d","uuid":"0873fe58-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"207c6a0f-0b64-41d7-9771-25552117d31d","uuid":"0873fe58-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"207c6a0f-0b64-41d7-9771-25552117d31d","uuid":"0873fe58-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:50Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:50Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"207c6a0f-0b64-41d7-9771-25552117d31d","uuid":"0873fe58-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:50Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:51.002 GMT [139] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.003 GMT [139] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.003 GMT [139] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.009 GMT [139] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.016 GMT [139] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.016 GMT [139] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.016 GMT [139] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.016 GMT [139] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.016 GMT [139] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.016 GMT [139] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.017 GMT [139] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.017 GMT [139] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.017 GMT [139] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.024 GMT [142] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.024 GMT [142] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.024 GMT [142] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.114 GMT [139] LOG:  startup process (PID 142) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.114 GMT [139] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"2023-03-23 09:56:51.115 GMT [139] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:51Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:51Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"207c6a0f-0b64-41d7-9771-25552117d31d","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c5cef807-ffb1-43fc-9fb5-39a6e5db7ed1","uuid":"095ff4fc-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c5cef807-ffb1-43fc-9fb5-39a6e5db7ed1","uuid":"095ff4fc-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c5cef807-ffb1-43fc-9fb5-39a6e5db7ed1","uuid":"095ff4fc-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:52Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c5cef807-ffb1-43fc-9fb5-39a6e5db7ed1","uuid":"095ff4fc-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:52.542 GMT [153] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.542 GMT [153] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.542 GMT [153] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.550 GMT [153] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.554 GMT [153] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.558 GMT [156] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.558 GMT [156] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.558 GMT [156] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.616 GMT [157] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.652 GMT [153] LOG:  startup process (PID 156) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.652 GMT [153] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"2023-03-23 09:56:52.653 GMT [153] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:52Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:52Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c5cef807-ffb1-43fc-9fb5-39a6e5db7ed1","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:53Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:54Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7bbc1558-386e-4574-8c9b-2d9bcf91029a","uuid":"0b0d4d10-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7bbc1558-386e-4574-8c9b-2d9bcf91029a","uuid":"0b0d4d10-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7bbc1558-386e-4574-8c9b-2d9bcf91029a","uuid":"0b0d4d10-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:55Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7bbc1558-386e-4574-8c9b-2d9bcf91029a","uuid":"0b0d4d10-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:56:55.358 GMT [168] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.358 GMT [168] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.358 GMT [168] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.365 GMT [168] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.369 GMT [168] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.369 GMT [168] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.369 GMT [168] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.369 GMT [168] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.369 GMT [168] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.369 GMT [168] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.370 GMT [168] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.370 GMT [168] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.370 GMT [168] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.375 GMT [171] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.375 GMT [171] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.375 GMT [171] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.467 GMT [168] LOG:  startup process (PID 171) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.467 GMT [168] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"2023-03-23 09:56:55.468 GMT [168] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:56:55Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7bbc1558-386e-4574-8c9b-2d9bcf91029a","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:55Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:57Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T09:56:57Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:57Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:57Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:57Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:57Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:59Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:59Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:59Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:59Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:56:59Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"42cdc662-b349-4b05-8cb8-b60682798f76","uuid":"0e4259ea-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"42cdc662-b349-4b05-8cb8-b60682798f76","uuid":"0e4259ea-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"42cdc662-b349-4b05-8cb8-b60682798f76","uuid":"0e4259ea-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:57:00Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"42cdc662-b349-4b05-8cb8-b60682798f76","uuid":"0e4259ea-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:57:00.805 GMT [182] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.806 GMT [182] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.806 GMT [182] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.842 GMT [182] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.859 GMT [182] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.859 GMT [182] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.859 GMT [182] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.860 GMT [182] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.860 GMT [182] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.860 GMT [182] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.860 GMT [182] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.860 GMT [182] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.860 GMT [182] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.877 GMT [185] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.878 GMT [185] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.878 GMT [185] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.923 GMT [186] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.968 GMT [182] LOG:  startup process (PID 185) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.968 GMT [182] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","logger":"pg_ctl","msg":"2023-03-23 09:57:00.969 GMT [182] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:00Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:01Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:01Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:01Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:01Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:01Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:57:01Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"42cdc662-b349-4b05-8cb8-b60682798f76","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:57:01Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:01Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:02Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:02Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:02Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:02Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:03Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:07Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T09:57:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:07Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:08Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d4204728-618b-4e38-b9a6-07efc65c5922","uuid":"14988179-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d4204728-618b-4e38-b9a6-07efc65c5922","uuid":"14988179-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d4204728-618b-4e38-b9a6-07efc65c5922","uuid":"14988179-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-3","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-3","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 09:55:35 AM UTC\nLatest checkpoint location:           0/15000028\nLatest checkpoint's REDO location:    0/15000028\nLatest checkpoint's REDO WAL file:    000000060000000000000015\nLatest checkpoint's TimeLineID:       6\nLatest checkpoint's PrevTimeLineID:   6\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:748\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 09:55:35 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:57:11Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-3","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-3 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d4204728-618b-4e38-b9a6-07efc65c5922","uuid":"14988179-c961-11ed-8f6c-7aac7e265a2a","logging_pod":"cluster-example-3","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Starting up instance","logging_pod":"cluster-example-3","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 09:57:11.368 GMT [197] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.368 GMT [197] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.368 GMT [197] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.380 GMT [197] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.383 GMT [197] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.383 GMT [197] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.383 GMT [197] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.384 GMT [197] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.384 GMT [197] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.384 GMT [197] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.384 GMT [197] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.384 GMT [197] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.384 GMT [197] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.388 GMT [201] LOG:  database system was shut down at 2023-03-23 09:55:35 GMT","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.389 GMT [201] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.389 GMT [201] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.479 GMT [197] LOG:  startup process (PID 201) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.479 GMT [197] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"2023-03-23 09:57:11.480 GMT [197] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-3"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-3"}
{"level":"error","ts":"2023-03-23T09:57:11Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"d4204728-618b-4e38-b9a6-07efc65c5922","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T09:57:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:13Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:13Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:13Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:14Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:14Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:14Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:14Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:17Z","msg":"Readiness probe failing","logging_pod":"cluster-example-3","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T09:57:17Z","msg":"Liveness probe failing","logging_pod":"cluster-example-3","err":"could not establish connection"}
{"level":"info","ts":"2023-03-23T09:57:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T09:57:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-3","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
