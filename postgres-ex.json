{"level":"info","ts":"2023-03-22T12:02:43Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-2","version":"1.19.0","build":{"Version":"1.19.0+dev50","Commit":"7d527e90","Date":"2023-03-03"}}
{"level":"info","ts":"2023-03-22T12:02:43Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":":8000"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":":9187"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":"localhost:8010"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"49844ffb-e702-454c-8f0b-e7d8fae85da7","uuid":"7397e850-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"49844ffb-e702-454c-8f0b-e7d8fae85da7","uuid":"7397e850-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"49844ffb-e702-454c-8f0b-e7d8fae85da7","uuid":"7397e850-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:43Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:44Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-22T12:02:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:47Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:47Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:47Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:48Z","msg":"DB not available, will retry","logging_pod":"cluster-example-2","err":"failed to connect to `host=cluster-example-rw user=streaming_replica database=postgres`: dial error (timeout: context deadline exceeded)"}
{"level":"info","ts":"2023-03-22T12:02:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:50Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-22T12:02:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:51Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:51Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:52Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:53Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:53Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:53Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:55Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"49844ffb-e702-454c-8f0b-e7d8fae85da7","uuid":"7397e850-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:55.436 GMT [26] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.441 GMT [26] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.441 GMT [26] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.452 GMT [26] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.455 GMT [26] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.473 GMT [29] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.473 GMT [29] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.473 GMT [29] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.613 GMT [26] LOG:  startup process (PID 29) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.613 GMT [26] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.614 GMT [26] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:55Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"49844ffb-e702-454c-8f0b-e7d8fae85da7","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"97e324b2-45a2-4fde-b848-9d66605d7d92","uuid":"7b004807-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"97e324b2-45a2-4fde-b848-9d66605d7d92","uuid":"7b004807-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"97e324b2-45a2-4fde-b848-9d66605d7d92","uuid":"7b004807-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:55Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"97e324b2-45a2-4fde-b848-9d66605d7d92","uuid":"7b004807-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:55.775 GMT [40] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.775 GMT [40] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.775 GMT [40] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.780 GMT [40] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.782 GMT [40] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.788 GMT [43] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.788 GMT [43] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.788 GMT [43] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.870 GMT [40] LOG:  startup process (PID 43) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.870 GMT [40] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"2023-03-22 12:02:55.871 GMT [40] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:55Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"97e324b2-45a2-4fde-b848-9d66605d7d92","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bff1ee51-6b69-45f1-8355-853658e226ae","uuid":"7b275817-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bff1ee51-6b69-45f1-8355-853658e226ae","uuid":"7b275817-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bff1ee51-6b69-45f1-8355-853658e226ae","uuid":"7b275817-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:55Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:55Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:56Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bff1ee51-6b69-45f1-8355-853658e226ae","uuid":"7b275817-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:56.034 GMT [54] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.034 GMT [54] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.034 GMT [54] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.041 GMT [54] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.046 GMT [54] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.051 GMT [57] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.051 GMT [57] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.051 GMT [57] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.136 GMT [54] LOG:  startup process (PID 57) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.136 GMT [54] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.136 GMT [54] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:56Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"bff1ee51-6b69-45f1-8355-853658e226ae","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7f16610a-d5d1-4a72-8a82-65032d9f4cb1","uuid":"7b4ef533-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7f16610a-d5d1-4a72-8a82-65032d9f4cb1","uuid":"7b4ef533-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7f16610a-d5d1-4a72-8a82-65032d9f4cb1","uuid":"7b4ef533-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:56Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7f16610a-d5d1-4a72-8a82-65032d9f4cb1","uuid":"7b4ef533-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:56.285 GMT [68] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.286 GMT [68] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.286 GMT [68] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.291 GMT [68] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.294 GMT [68] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.297 GMT [71] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.298 GMT [71] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.298 GMT [71] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.359 GMT [73] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.372 GMT [74] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.393 GMT [68] LOG:  startup process (PID 71) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.393 GMT [68] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.393 GMT [68] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:56Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7f16610a-d5d1-4a72-8a82-65032d9f4cb1","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"936dedc1-6f19-4dd5-ba61-eb8e31efcd8a","uuid":"7b75634f-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"936dedc1-6f19-4dd5-ba61-eb8e31efcd8a","uuid":"7b75634f-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"936dedc1-6f19-4dd5-ba61-eb8e31efcd8a","uuid":"7b75634f-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:56Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"936dedc1-6f19-4dd5-ba61-eb8e31efcd8a","uuid":"7b75634f-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:56.534 GMT [84] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.535 GMT [84] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.535 GMT [84] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.540 GMT [84] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.543 GMT [84] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.546 GMT [87] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.546 GMT [87] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.546 GMT [87] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.631 GMT [84] LOG:  startup process (PID 87) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.631 GMT [84] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.631 GMT [84] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:56Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"936dedc1-6f19-4dd5-ba61-eb8e31efcd8a","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e4ec7cfc-7fda-4159-a679-56b7d72791d7","uuid":"7b9b9ac4-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e4ec7cfc-7fda-4159-a679-56b7d72791d7","uuid":"7b9b9ac4-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e4ec7cfc-7fda-4159-a679-56b7d72791d7","uuid":"7b9b9ac4-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:56Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e4ec7cfc-7fda-4159-a679-56b7d72791d7","uuid":"7b9b9ac4-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:56.786 GMT [98] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.786 GMT [98] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.786 GMT [98] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.791 GMT [98] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.794 GMT [98] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.798 GMT [101] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.798 GMT [101] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.798 GMT [101] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.880 GMT [98] LOG:  startup process (PID 101) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.880 GMT [98] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"2023-03-22 12:02:56.880 GMT [98] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:56Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e4ec7cfc-7fda-4159-a679-56b7d72791d7","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7930b0f6-c54a-4658-8645-f191b27260da","uuid":"7bc1ce1d-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7930b0f6-c54a-4658-8645-f191b27260da","uuid":"7bc1ce1d-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7930b0f6-c54a-4658-8645-f191b27260da","uuid":"7bc1ce1d-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:56Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:56Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:57Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7930b0f6-c54a-4658-8645-f191b27260da","uuid":"7bc1ce1d-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:57.037 GMT [112] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.038 GMT [112] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.038 GMT [112] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.043 GMT [112] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.046 GMT [112] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.050 GMT [115] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.050 GMT [115] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.050 GMT [115] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.133 GMT [112] LOG:  startup process (PID 115) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.133 GMT [112] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.133 GMT [112] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:57Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7930b0f6-c54a-4658-8645-f191b27260da","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7c31fa48-8c28-4430-97ad-69f8725ae793","uuid":"7be86e89-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7c31fa48-8c28-4430-97ad-69f8725ae793","uuid":"7be86e89-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7c31fa48-8c28-4430-97ad-69f8725ae793","uuid":"7be86e89-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:57Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7c31fa48-8c28-4430-97ad-69f8725ae793","uuid":"7be86e89-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:57.287 GMT [126] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.287 GMT [126] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.287 GMT [126] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.294 GMT [126] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.297 GMT [126] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.301 GMT [129] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.301 GMT [129] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.301 GMT [129] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.384 GMT [126] LOG:  startup process (PID 129) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.384 GMT [126] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.384 GMT [126] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:57Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"7c31fa48-8c28-4430-97ad-69f8725ae793","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"de0b539e-6953-4c08-85e0-02ef402a3fc4","uuid":"7c1964bf-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"de0b539e-6953-4c08-85e0-02ef402a3fc4","uuid":"7c1964bf-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"de0b539e-6953-4c08-85e0-02ef402a3fc4","uuid":"7c1964bf-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:57Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"de0b539e-6953-4c08-85e0-02ef402a3fc4","uuid":"7c1964bf-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:57.611 GMT [140] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.611 GMT [140] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.611 GMT [140] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.616 GMT [140] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.619 GMT [140] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.623 GMT [143] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.623 GMT [143] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.623 GMT [143] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.710 GMT [140] LOG:  startup process (PID 143) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.710 GMT [140] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"2023-03-22 12:02:57.711 GMT [140] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:57Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"de0b539e-6953-4c08-85e0-02ef402a3fc4","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:57Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b113219d-c37b-4082-bc4e-8deb00f72726","uuid":"7d033f0a-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b113219d-c37b-4082-bc4e-8deb00f72726","uuid":"7d033f0a-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b113219d-c37b-4082-bc4e-8deb00f72726","uuid":"7d033f0a-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:59Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b113219d-c37b-4082-bc4e-8deb00f72726","uuid":"7d033f0a-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:02:59.171 GMT [154] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.172 GMT [154] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.172 GMT [154] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.194 GMT [154] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.198 GMT [154] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.217 GMT [157] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.217 GMT [157] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.217 GMT [157] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.308 GMT [154] LOG:  startup process (PID 157) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.308 GMT [154] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"2023-03-22 12:02:59.309 GMT [154] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:02:59Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:02:59Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"b113219d-c37b-4082-bc4e-8deb00f72726","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:00Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:00Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:00Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:00Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:00Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"45a60be1-8317-416d-8f91-7e1e0d83d860","uuid":"7eb279f5-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"45a60be1-8317-416d-8f91-7e1e0d83d860","uuid":"7eb279f5-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"45a60be1-8317-416d-8f91-7e1e0d83d860","uuid":"7eb279f5-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:03:01Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:03:01Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:03:01Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"45a60be1-8317-416d-8f91-7e1e0d83d860","uuid":"7eb279f5-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:01Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:03:02.023 GMT [168] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.023 GMT [168] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.023 GMT [168] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.043 GMT [168] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.050 GMT [168] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.064 GMT [171] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.065 GMT [171] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.065 GMT [171] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.148 GMT [168] LOG:  startup process (PID 171) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.148 GMT [168] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"2023-03-22 12:03:02.149 GMT [168] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:02Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:03:02Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"45a60be1-8317-416d-8f91-7e1e0d83d860","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:02Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:02Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:03Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:03Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:04Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:05Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:05Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:05Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:06Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"688dba4a-bda5-4345-a32f-76c359608e77","uuid":"81e93ec2-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"688dba4a-bda5-4345-a32f-76c359608e77","uuid":"81e93ec2-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"688dba4a-bda5-4345-a32f-76c359608e77","uuid":"81e93ec2-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:03:07Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"688dba4a-bda5-4345-a32f-76c359608e77","uuid":"81e93ec2-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:03:07.360 GMT [182] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.360 GMT [182] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.360 GMT [182] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.365 GMT [182] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.368 GMT [182] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.374 GMT [185] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.374 GMT [185] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.374 GMT [185] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.458 GMT [182] LOG:  startup process (PID 185) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.458 GMT [182] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"2023-03-22 12:03:07.459 GMT [182] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:07Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:03:07Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"688dba4a-bda5-4345-a32f-76c359608e77","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:08Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:08Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:08Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:08Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:09Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:10Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-22T12:03:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:11Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:12Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:13Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:13Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:13Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:14Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ad9ee455-5de8-4cf1-9af4-1cf8ab0dfbcc","uuid":"882a2c97-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ad9ee455-5de8-4cf1-9af4-1cf8ab0dfbcc","uuid":"882a2c97-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ad9ee455-5de8-4cf1-9af4-1cf8ab0dfbcc","uuid":"882a2c97-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:03:17Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ad9ee455-5de8-4cf1-9af4-1cf8ab0dfbcc","uuid":"882a2c97-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:03:17.864 GMT [196] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.864 GMT [196] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.864 GMT [196] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.870 GMT [196] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.872 GMT [196] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.878 GMT [199] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.878 GMT [199] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.878 GMT [199] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.964 GMT [196] LOG:  startup process (PID 199) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.964 GMT [196] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:17Z","logger":"pg_ctl","msg":"2023-03-22 12:03:17.965 GMT [196] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:18Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:18Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:18Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:18Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:03:18Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ad9ee455-5de8-4cf1-9af4-1cf8ab0dfbcc","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:20Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-22T12:03:20Z","msg":"Liveness probe failing","logging_pod":"cluster-example-2","err":"could not establish connection"}
{"level":"info","ts":"2023-03-22T12:03:20Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:21Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:21Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:24Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:24Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:24Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:24Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:26Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:27Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:27Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:27Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:27Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:29Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:30Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:30Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:30Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:30Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:30Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-22T12:03:30Z","msg":"Liveness probe failing","logging_pod":"cluster-example-2","err":"could not establish connection"}
{"level":"info","ts":"2023-03-22T12:03:31Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:32Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:32Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:32Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:37Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"34a8712f-dab6-44a0-8abe-cf3229cfa807","uuid":"948681aa-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"34a8712f-dab6-44a0-8abe-cf3229cfa807","uuid":"948681aa-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"34a8712f-dab6-44a0-8abe-cf3229cfa807","uuid":"948681aa-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:03:38Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"34a8712f-dab6-44a0-8abe-cf3229cfa807","uuid":"948681aa-c8a9-11ed-8a44-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:03:38.595 GMT [212] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.595 GMT [212] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.596 GMT [212] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.600 GMT [212] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.604 GMT [212] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.608 GMT [215] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.608 GMT [215] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.608 GMT [215] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.697 GMT [212] LOG:  startup process (PID 215) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.697 GMT [212] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"2023-03-22 12:03:38.697 GMT [212] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:03:38Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:03:38Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"34a8712f-dab6-44a0-8abe-cf3229cfa807","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:03:39Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:05:20Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-2","version":"1.19.0","build":{"Version":"1.19.0+dev50","Commit":"7d527e90","Date":"2023-03-03"}}
{"level":"info","ts":"2023-03-22T12:05:20Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:20Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-22T12:05:20Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"info","ts":"2023-03-22T12:05:20Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":":9187"}
{"level":"info","ts":"2023-03-22T12:05:20Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":":8000"}
{"level":"info","ts":"2023-03-22T12:05:20Z","msg":"Starting webserver","logging_pod":"cluster-example-2","address":"localhost:8010"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4bbb00eb-03ac-4858-9b53-3f091aaa09bc","uuid":"d19c69d9-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4bbb00eb-03ac-4858-9b53-3f091aaa09bc","uuid":"d19c69d9-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4bbb00eb-03ac-4858-9b53-3f091aaa09bc","uuid":"d19c69d9-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:21Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4bbb00eb-03ac-4858-9b53-3f091aaa09bc","uuid":"d19c69d9-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:21.108 GMT [25] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.109 GMT [25] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.109 GMT [25] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.123 GMT [25] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.127 GMT [25] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.130 GMT [28] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.130 GMT [28] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.130 GMT [28] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.149 GMT [29] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.163 GMT [30] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.216 GMT [31] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.217 GMT [25] LOG:  startup process (PID 28) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.217 GMT [25] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.217 GMT [25] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:21Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4bbb00eb-03ac-4858-9b53-3f091aaa09bc","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"00224fa6-25ac-49e0-92f4-25209938fb93","uuid":"d1c64b07-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"00224fa6-25ac-49e0-92f4-25209938fb93","uuid":"d1c64b07-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"00224fa6-25ac-49e0-92f4-25209938fb93","uuid":"d1c64b07-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:21Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"00224fa6-25ac-49e0-92f4-25209938fb93","uuid":"d1c64b07-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:21.360 GMT [42] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.361 GMT [42] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.361 GMT [42] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.378 GMT [42] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.382 GMT [42] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.386 GMT [45] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.386 GMT [45] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.386 GMT [45] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.474 GMT [42] LOG:  startup process (PID 45) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.474 GMT [42] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.475 GMT [42] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:21Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"00224fa6-25ac-49e0-92f4-25209938fb93","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c7642601-79db-41bd-bc21-57a2156189f7","uuid":"d1efc3e5-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c7642601-79db-41bd-bc21-57a2156189f7","uuid":"d1efc3e5-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c7642601-79db-41bd-bc21-57a2156189f7","uuid":"d1efc3e5-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:21Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c7642601-79db-41bd-bc21-57a2156189f7","uuid":"d1efc3e5-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:21.632 GMT [56] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.632 GMT [56] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.632 GMT [56] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.641 GMT [56] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.643 GMT [56] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.647 GMT [59] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.648 GMT [59] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.648 GMT [59] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.735 GMT [56] LOG:  startup process (PID 59) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.735 GMT [56] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.735 GMT [56] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:21Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c7642601-79db-41bd-bc21-57a2156189f7","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e6f7f3a-445b-4969-9b7e-9ee1266d377c","uuid":"d21ab232-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e6f7f3a-445b-4969-9b7e-9ee1266d377c","uuid":"d21ab232-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e6f7f3a-445b-4969-9b7e-9ee1266d377c","uuid":"d21ab232-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:21Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e6f7f3a-445b-4969-9b7e-9ee1266d377c","uuid":"d21ab232-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:21.912 GMT [70] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.912 GMT [70] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.912 GMT [70] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.919 GMT [70] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.924 GMT [70] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.927 GMT [73] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.928 GMT [73] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:21Z","logger":"pg_ctl","msg":"2023-03-22 12:05:21.928 GMT [73] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.022 GMT [70] LOG:  startup process (PID 73) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.022 GMT [70] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.022 GMT [70] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:22Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0e6f7f3a-445b-4969-9b7e-9ee1266d377c","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96da37d2-cda8-44ff-b431-6dafe0d69cae","uuid":"d24897b6-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96da37d2-cda8-44ff-b431-6dafe0d69cae","uuid":"d24897b6-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96da37d2-cda8-44ff-b431-6dafe0d69cae","uuid":"d24897b6-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:22Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96da37d2-cda8-44ff-b431-6dafe0d69cae","uuid":"d24897b6-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:22.204 GMT [84] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.204 GMT [84] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.204 GMT [84] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.209 GMT [84] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.211 GMT [84] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.222 GMT [87] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.223 GMT [87] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.223 GMT [87] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.304 GMT [84] LOG:  startup process (PID 87) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.304 GMT [84] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.305 GMT [84] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:22Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"96da37d2-cda8-44ff-b431-6dafe0d69cae","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"549a6307-9e11-4c68-901d-a5bab11180b2","uuid":"d27b3488-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"549a6307-9e11-4c68-901d-a5bab11180b2","uuid":"d27b3488-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"549a6307-9e11-4c68-901d-a5bab11180b2","uuid":"d27b3488-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Readiness probe failing","logging_pod":"cluster-example-2","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:22Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"549a6307-9e11-4c68-901d-a5bab11180b2","uuid":"d27b3488-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:22.543 GMT [98] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.543 GMT [98] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.543 GMT [98] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.549 GMT [98] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.552 GMT [98] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.557 GMT [101] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.558 GMT [101] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.558 GMT [101] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.641 GMT [98] LOG:  startup process (PID 101) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.641 GMT [98] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.642 GMT [98] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:22Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"549a6307-9e11-4c68-901d-a5bab11180b2","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d3c8260-6ead-4f67-956f-ec0395e4de76","uuid":"d2bb5e78-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d3c8260-6ead-4f67-956f-ec0395e4de76","uuid":"d2bb5e78-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d3c8260-6ead-4f67-956f-ec0395e4de76","uuid":"d2bb5e78-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:22Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d3c8260-6ead-4f67-956f-ec0395e4de76","uuid":"d2bb5e78-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:22.969 GMT [112] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.969 GMT [112] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.969 GMT [112] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.981 GMT [112] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.983 GMT [112] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.983 GMT [112] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.983 GMT [112] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.984 GMT [112] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.987 GMT [115] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.987 GMT [115] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:22Z","logger":"pg_ctl","msg":"2023-03-22 12:05:22.988 GMT [115] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.071 GMT [112] LOG:  startup process (PID 115) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.071 GMT [112] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.072 GMT [112] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:23Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0d3c8260-6ead-4f67-956f-ec0395e4de76","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e29e67c1-ede2-4f89-be8b-852f1f210bf6","uuid":"d3147ab9-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e29e67c1-ede2-4f89-be8b-852f1f210bf6","uuid":"d3147ab9-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e29e67c1-ede2-4f89-be8b-852f1f210bf6","uuid":"d3147ab9-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:23Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e29e67c1-ede2-4f89-be8b-852f1f210bf6","uuid":"d3147ab9-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:23.546 GMT [126] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.547 GMT [126] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.547 GMT [126] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.554 GMT [126] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.565 GMT [126] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.568 GMT [129] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.569 GMT [129] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.569 GMT [129] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.660 GMT [126] LOG:  startup process (PID 129) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.660 GMT [126] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"2023-03-22 12:05:23.661 GMT [126] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:23Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e29e67c1-ede2-4f89-be8b-852f1f210bf6","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:05:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"Instance status probe failing","logging_pod":"cluster-example-2","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fba46882-5df6-4ba2-95b1-9632a6cd82af","uuid":"d39d8523-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fba46882-5df6-4ba2-95b1-9632a6cd82af","uuid":"d39d8523-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","currentPrimary":"cluster-example-1","targetPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fba46882-5df6-4ba2-95b1-9632a6cd82af","uuid":"d39d8523-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","targetPrimary":"cluster-example-1","currentPrimary":"cluster-example-1"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-2","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-2","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213087852405354517\nDatabase cluster state:               shut down\npg_control last modified:             Wed 22 Mar 2023 08:19:19 AM UTC\nLatest checkpoint location:           0/A000028\nLatest checkpoint's REDO location:    0/A000028\nLatest checkpoint's REDO WAL file:    00000004000000000000000A\nLatest checkpoint's TimeLineID:       4\nLatest checkpoint's PrevTimeLineID:   4\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:743\nLatest checkpoint's NextOID:          16391\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Wed 22 Mar 2023 08:19:19 AM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            aa0959f46db2bc48e66f59acb5db223e4c8db05ead372a9b8aab635fadd2adf2\n","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-2"}
{"level":"error","ts":"2023-03-22T12:05:24Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-2","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-2 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"fba46882-5df6-4ba2-95b1-9632a6cd82af","uuid":"d39d8523-c8a9-11ed-b3d6-a61fe2170981","logging_pod":"cluster-example-2","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","msg":"Starting up instance","logging_pod":"cluster-example-2","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-22 12:05:24.439 GMT [140] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.440 GMT [140] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.440 GMT [140] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.450 GMT [140] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.453 GMT [140] CONTEXT:  line 11 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.460 GMT [143] LOG:  database system was shut down at 2023-03-22 08:19:19 GMT","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.460 GMT [143] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.460 GMT [143] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.543 GMT [140] LOG:  startup process (PID 143) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.543 GMT [140] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-2"}
{"level":"info","ts":"2023-03-22T12:05:24Z","logger":"pg_ctl","msg":"2023-03-22 12:05:24.543 GMT [140] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-2"}
