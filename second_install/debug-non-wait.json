{"level":"info","ts":"2023-03-23T15:18:08Z","logger":"setup","msg":"Starting CloudNativePG Instance Manager","logging_pod":"cluster-example-1","version":"1.19.1","build":{"Version":"1.19.1","Commit":"cb24d237","Date":"2023-03-20"}}
{"level":"info","ts":"2023-03-23T15:18:08Z","logger":"setup","msg":"starting controller-runtime manager","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Starting EventSource","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","source":"kind source: *v1.Cluster"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Starting Controller","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster"}
{"level":"debug","ts":"2023-03-23T15:18:08Z","msg":"starting the postgres loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-23T15:18:08Z","msg":"starting signal loop","caller":"pkg/management/log/log.go:181","logging_pod":"cluster-example-1"}
{"level":"debug","ts":"2023-03-23T15:18:08Z","msg":"Checking PGDATA coherence","caller":"internal/cmd/manager/instance/run/lifecycle/run.go:255","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":":8000"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":":9187"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Starting webserver","logging_pod":"cluster-example-1","address":"localhost:8010"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Starting workers","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","worker count":1}
{"level":"debug","ts":"2023-03-23T15:18:08Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0412b991-4352-4218-894e-e22e4d786634","uuid":"eb07c9f6-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:08Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0412b991-4352-4218-894e-e22e4d786634","uuid":"eb07c9f6-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0412b991-4352-4218-894e-e22e4d786634","uuid":"eb07c9f6-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0412b991-4352-4218-894e-e22e4d786634","uuid":"eb07c9f6-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0412b991-4352-4218-894e-e22e4d786634","uuid":"eb07c9f6-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:08Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:09Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:09Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:09Z","msg":"Readiness probe failing","logging_pod":"cluster-example-1","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T15:18:10Z","msg":"Readiness probe failing","logging_pod":"cluster-example-1","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T15:18:10Z","logger":"pg_rewind","msg":"pg_rewind: connected to server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:11Z","logger":"pg_rewind","msg":"pg_rewind: servers diverged at WAL location 0/7000110 on timeline 3","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:11Z","logger":"pg_rewind","msg":"pg_rewind: rewinding from last common checkpoint at 0/7000060 on timeline 3","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:11Z","logger":"pg_rewind","msg":"pg_rewind: reading source file list","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:12Z","msg":"Readiness probe failing","logging_pod":"cluster-example-1","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T15:18:14Z","logger":"pg_rewind","msg":"pg_rewind: reading target file list","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:14Z","logger":"pg_rewind","msg":"pg_rewind: reading WAL in target","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:14Z","logger":"pg_rewind","msg":"pg_rewind: need to copy 132 MB (total source directory size is 157 MB)","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:14Z","logger":"pg_rewind","msg":"     0/136025 kB (0%) copied","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_rewind","msg":"  7988/136025 kB (5%) copied","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_rewind","msg":"pg_rewind: error: unexpected result while fetching remote files: server closed the connection unexpectedly","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_rewind","msg":"\tThis probably means the server terminated abnormally","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_rewind","msg":"\tbefore or while processing the request.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_rewind","msg":"server closed the connection unexpectedly","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_rewind","msg":"\tThis probably means the server terminated abnormally","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_rewind","msg":"\tbefore or while processing the request.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:15Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0412b991-4352-4218-894e-e22e4d786634","uuid":"eb07c9f6-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:15.609 GMT [27] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.610 GMT [27] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.610 GMT [27] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.616 GMT [27] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.620 GMT [27] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.632 GMT [31] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.632 GMT [31] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.632 GMT [31] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.648 GMT [32] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.781 GMT [27] LOG:  startup process (PID 31) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.781 GMT [27] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.782 GMT [27] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:15Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"0412b991-4352-4218-894e-e22e4d786634","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-23T15:18:15Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c582c32b-8ff5-416f-85d4-4d4d26b5e5c4","uuid":"ef2fa1cc-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:15Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c582c32b-8ff5-416f-85d4-4d4d26b5e5c4","uuid":"ef2fa1cc-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c582c32b-8ff5-416f-85d4-4d4d26b5e5c4","uuid":"ef2fa1cc-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c582c32b-8ff5-416f-85d4-4d4d26b5e5c4","uuid":"ef2fa1cc-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c582c32b-8ff5-416f-85d4-4d4d26b5e5c4","uuid":"ef2fa1cc-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:15Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c582c32b-8ff5-416f-85d4-4d4d26b5e5c4","uuid":"ef2fa1cc-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:15.961 GMT [42] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.962 GMT [42] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.962 GMT [42] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.968 GMT [42] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.973 GMT [42] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.977 GMT [45] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.977 GMT [45] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:15Z","logger":"pg_ctl","msg":"2023-03-23 15:18:15.977 GMT [45] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.070 GMT [42] LOG:  startup process (PID 45) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.070 GMT [42] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.071 GMT [42] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:16Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c582c32b-8ff5-416f-85d4-4d4d26b5e5c4","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-23T15:18:16Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ec4f21e1-67c7-4c4f-b268-cfbc2b491270","uuid":"ef57dfdf-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:16Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ec4f21e1-67c7-4c4f-b268-cfbc2b491270","uuid":"ef57dfdf-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ec4f21e1-67c7-4c4f-b268-cfbc2b491270","uuid":"ef57dfdf-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ec4f21e1-67c7-4c4f-b268-cfbc2b491270","uuid":"ef57dfdf-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ec4f21e1-67c7-4c4f-b268-cfbc2b491270","uuid":"ef57dfdf-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:16Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ec4f21e1-67c7-4c4f-b268-cfbc2b491270","uuid":"ef57dfdf-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:16.213 GMT [56] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.214 GMT [56] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.214 GMT [56] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.219 GMT [56] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.221 GMT [56] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.224 GMT [59] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.224 GMT [59] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.224 GMT [59] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.318 GMT [56] LOG:  startup process (PID 59) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.318 GMT [56] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.319 GMT [56] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:16Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"ec4f21e1-67c7-4c4f-b268-cfbc2b491270","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-23T15:18:16Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"354eb321-5b77-4c46-9da4-b6cf1189f1aa","uuid":"ef7e5ea6-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:16Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"354eb321-5b77-4c46-9da4-b6cf1189f1aa","uuid":"ef7e5ea6-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"354eb321-5b77-4c46-9da4-b6cf1189f1aa","uuid":"ef7e5ea6-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"354eb321-5b77-4c46-9da4-b6cf1189f1aa","uuid":"ef7e5ea6-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"354eb321-5b77-4c46-9da4-b6cf1189f1aa","uuid":"ef7e5ea6-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:16Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"354eb321-5b77-4c46-9da4-b6cf1189f1aa","uuid":"ef7e5ea6-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:16.467 GMT [70] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.467 GMT [70] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.467 GMT [70] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.472 GMT [70] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.475 GMT [70] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.478 GMT [73] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.478 GMT [73] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.478 GMT [73] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.571 GMT [70] LOG:  startup process (PID 73) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.571 GMT [70] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.571 GMT [70] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:16Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"354eb321-5b77-4c46-9da4-b6cf1189f1aa","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-23T15:18:16Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e113a620-61b4-458d-952a-b3b8d7a29385","uuid":"efa4eb2e-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:16Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e113a620-61b4-458d-952a-b3b8d7a29385","uuid":"efa4eb2e-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e113a620-61b4-458d-952a-b3b8d7a29385","uuid":"efa4eb2e-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e113a620-61b4-458d-952a-b3b8d7a29385","uuid":"efa4eb2e-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e113a620-61b4-458d-952a-b3b8d7a29385","uuid":"efa4eb2e-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:16Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e113a620-61b4-458d-952a-b3b8d7a29385","uuid":"efa4eb2e-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:16.720 GMT [84] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.721 GMT [84] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.721 GMT [84] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.727 GMT [84] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.730 GMT [84] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.735 GMT [87] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.735 GMT [87] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.735 GMT [87] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.828 GMT [84] LOG:  startup process (PID 87) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.828 GMT [84] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.828 GMT [84] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:16Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"e113a620-61b4-458d-952a-b3b8d7a29385","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-23T15:18:16Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c861c6c3-f631-454c-9cf1-bef3fd18d891","uuid":"efcb910a-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:16Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c861c6c3-f631-454c-9cf1-bef3fd18d891","uuid":"efcb910a-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c861c6c3-f631-454c-9cf1-bef3fd18d891","uuid":"efcb910a-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c861c6c3-f631-454c-9cf1-bef3fd18d891","uuid":"efcb910a-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c861c6c3-f631-454c-9cf1-bef3fd18d891","uuid":"efcb910a-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:16Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c861c6c3-f631-454c-9cf1-bef3fd18d891","uuid":"efcb910a-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:16Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:16.977 GMT [98] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.977 GMT [98] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.977 GMT [98] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.982 GMT [98] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.985 GMT [98] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.988 GMT [102] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.988 GMT [102] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:16Z","logger":"pg_ctl","msg":"2023-03-23 15:18:16.988 GMT [102] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.024 GMT [103] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.080 GMT [98] LOG:  startup process (PID 102) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.080 GMT [98] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.081 GMT [98] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:17Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"c861c6c3-f631-454c-9cf1-bef3fd18d891","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-23T15:18:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cf05355f-f6ce-4aaf-9be4-e303e66ebce6","uuid":"eff1ebce-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cf05355f-f6ce-4aaf-9be4-e303e66ebce6","uuid":"eff1ebce-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cf05355f-f6ce-4aaf-9be4-e303e66ebce6","uuid":"eff1ebce-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cf05355f-f6ce-4aaf-9be4-e303e66ebce6","uuid":"eff1ebce-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cf05355f-f6ce-4aaf-9be4-e303e66ebce6","uuid":"eff1ebce-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:17Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cf05355f-f6ce-4aaf-9be4-e303e66ebce6","uuid":"eff1ebce-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:17.225 GMT [113] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.225 GMT [113] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.225 GMT [113] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.230 GMT [113] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.233 GMT [113] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.237 GMT [116] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.237 GMT [116] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.237 GMT [116] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.299 GMT [119] FATAL:  the database system is starting up","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: server error (FATAL: the database system is starting up (SQLSTATE 57P03))"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.333 GMT [113] LOG:  startup process (PID 116) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.333 GMT [113] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.333 GMT [113] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:17Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cf05355f-f6ce-4aaf-9be4-e303e66ebce6","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-23T15:18:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f6b26fe8-e263-4062-ad84-3fac9f8e43ad","uuid":"f0185e29-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f6b26fe8-e263-4062-ad84-3fac9f8e43ad","uuid":"f0185e29-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f6b26fe8-e263-4062-ad84-3fac9f8e43ad","uuid":"f0185e29-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f6b26fe8-e263-4062-ad84-3fac9f8e43ad","uuid":"f0185e29-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f6b26fe8-e263-4062-ad84-3fac9f8e43ad","uuid":"f0185e29-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:17Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f6b26fe8-e263-4062-ad84-3fac9f8e43ad","uuid":"f0185e29-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:17.477 GMT [129] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.478 GMT [129] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.478 GMT [129] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.482 GMT [129] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.485 GMT [129] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.489 GMT [132] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.490 GMT [132] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.490 GMT [132] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.582 GMT [129] LOG:  startup process (PID 132) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.582 GMT [129] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.582 GMT [129] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:17Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"f6b26fe8-e263-4062-ad84-3fac9f8e43ad","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"debug","ts":"2023-03-23T15:18:17Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cdda4622-14e5-47ef-a12a-cdefcb5fe536","uuid":"f0493438-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:17Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cdda4622-14e5-47ef-a12a-cdefcb5fe536","uuid":"f0493438-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cdda4622-14e5-47ef-a12a-cdefcb5fe536","uuid":"f0493438-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cdda4622-14e5-47ef-a12a-cdefcb5fe536","uuid":"f0493438-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cdda4622-14e5-47ef-a12a-cdefcb5fe536","uuid":"f0493438-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:17Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cdda4622-14e5-47ef-a12a-cdefcb5fe536","uuid":"f0493438-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:17.795 GMT [142] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.795 GMT [142] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.795 GMT [142] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.800 GMT [142] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.802 GMT [142] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.806 GMT [145] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.806 GMT [145] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.806 GMT [145] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.900 GMT [142] LOG:  startup process (PID 145) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.900 GMT [142] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"2023-03-23 15:18:17.901 GMT [142] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:17Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:17Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"cdda4622-14e5-47ef-a12a-cdefcb5fe536","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:18Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-23T15:18:19Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6bade543-fbbd-415b-ad83-c342b8bbc3d0","uuid":"f132f6ef-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:19Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6bade543-fbbd-415b-ad83-c342b8bbc3d0","uuid":"f132f6ef-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6bade543-fbbd-415b-ad83-c342b8bbc3d0","uuid":"f132f6ef-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6bade543-fbbd-415b-ad83-c342b8bbc3d0","uuid":"f132f6ef-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6bade543-fbbd-415b-ad83-c342b8bbc3d0","uuid":"f132f6ef-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:19Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6bade543-fbbd-415b-ad83-c342b8bbc3d0","uuid":"f132f6ef-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:19.328 GMT [156] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.329 GMT [156] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.329 GMT [156] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.333 GMT [156] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.336 GMT [156] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.339 GMT [159] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.339 GMT [159] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.339 GMT [159] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.434 GMT [156] LOG:  startup process (PID 159) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.434 GMT [156] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"2023-03-23 15:18:19.435 GMT [156] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:19Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"6bade543-fbbd-415b-ad83-c342b8bbc3d0","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:19Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:21Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-23T15:18:22Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4887e00a-3c09-45b3-9e5a-e2d943248e06","uuid":"f2e0876d-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:22Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4887e00a-3c09-45b3-9e5a-e2d943248e06","uuid":"f2e0876d-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4887e00a-3c09-45b3-9e5a-e2d943248e06","uuid":"f2e0876d-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4887e00a-3c09-45b3-9e5a-e2d943248e06","uuid":"f2e0876d-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4887e00a-3c09-45b3-9e5a-e2d943248e06","uuid":"f2e0876d-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:22Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4887e00a-3c09-45b3-9e5a-e2d943248e06","uuid":"f2e0876d-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:22.151 GMT [170] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.152 GMT [170] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.152 GMT [170] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.160 GMT [170] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.163 GMT [170] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.166 GMT [173] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.166 GMT [173] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.166 GMT [173] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.260 GMT [170] LOG:  startup process (PID 173) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.260 GMT [170] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"2023-03-23 15:18:22.260 GMT [170] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:22Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"4887e00a-3c09-45b3-9e5a-e2d943248e06","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Readiness probe failing","logging_pod":"cluster-example-1","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:22Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:23Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:25Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:25Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:25Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:25Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:26Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-23T15:18:27Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"349a1b47-71c0-4a44-b833-43b419ac4ea5","uuid":"f614f7ed-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:27Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"349a1b47-71c0-4a44-b833-43b419ac4ea5","uuid":"f614f7ed-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"349a1b47-71c0-4a44-b833-43b419ac4ea5","uuid":"f614f7ed-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"349a1b47-71c0-4a44-b833-43b419ac4ea5","uuid":"f614f7ed-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"349a1b47-71c0-4a44-b833-43b419ac4ea5","uuid":"f614f7ed-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:27Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"349a1b47-71c0-4a44-b833-43b419ac4ea5","uuid":"f614f7ed-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:27.528 GMT [184] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.529 GMT [184] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.529 GMT [184] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.534 GMT [184] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.537 GMT [184] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.540 GMT [187] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.540 GMT [187] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.540 GMT [187] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.639 GMT [184] LOG:  startup process (PID 187) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.639 GMT [184] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"2023-03-23 15:18:27.639 GMT [184] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:27Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"349a1b47-71c0-4a44-b833-43b419ac4ea5","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:27Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:28Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:29Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:30Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:30Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:30Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:30Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:32Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:32Z","msg":"Readiness probe failing","logging_pod":"cluster-example-1","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T15:18:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:33Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:34Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:35Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:36Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"debug","ts":"2023-03-23T15:18:37Z","msg":"Reconciling Cluster","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"271a01bb-b8f4-4236-a473-fefb23c64fc2","uuid":"fc5778e2-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:109","logging_pod":"cluster-example-1","cluster":{"apiVersion":"postgresql.cnpg.io/v1","kind":"Cluster","namespace":"default","name":"cluster-example"}}
{"level":"debug","ts":"2023-03-23T15:18:37Z","msg":"Reconciling custom monitoring queries","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"271a01bb-b8f4-4236-a473-fefb23c64fc2","uuid":"fc5778e2-c98d-11ed-9303-9a717ac2e08d","caller":"internal/management/controller/instance_controller.go:727","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"Cluster status","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"271a01bb-b8f4-4236-a473-fefb23c64fc2","uuid":"fc5778e2-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"This is an old primary instance, waiting for the switchover to finish","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"271a01bb-b8f4-4236-a473-fefb23c64fc2","uuid":"fc5778e2-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","currentPrimary":"cluster-example-2","targetPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"Switchover completed","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"271a01bb-b8f4-4236-a473-fefb23c64fc2","uuid":"fc5778e2-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","targetPrimary":"cluster-example-2","currentPrimary":"cluster-example-2"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"Waiting for the new primary to be available","logging_pod":"cluster-example-1","primaryConnInfo":"host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres connect_timeout=5"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"Extracting pg_controldata information","logging_pod":"cluster-example-1","reason":"before pg_rewind"}
{"level":"info","ts":"2023-03-23T15:18:37Z","logger":"pg_controldata","msg":"pg_control version number:            1300\nCatalog version number:               202209061\nDatabase system identifier:           7213723966086483989\nDatabase cluster state:               shut down\npg_control last modified:             Thu 23 Mar 2023 03:15:11 PM UTC\nLatest checkpoint location:           0/8000028\nLatest checkpoint's REDO location:    0/8000028\nLatest checkpoint's REDO WAL file:    000000030000000000000008\nLatest checkpoint's TimeLineID:       3\nLatest checkpoint's PrevTimeLineID:   3\nLatest checkpoint's full_page_writes: on\nLatest checkpoint's NextXID:          0:741\nLatest checkpoint's NextOID:          24578\nLatest checkpoint's NextMultiXactId:  1\nLatest checkpoint's NextMultiOffset:  0\nLatest checkpoint's oldestXID:        716\nLatest checkpoint's oldestXID's DB:   1\nLatest checkpoint's oldestActiveXID:  0\nLatest checkpoint's oldestMultiXid:   1\nLatest checkpoint's oldestMulti's DB: 1\nLatest checkpoint's oldestCommitTsXid:0\nLatest checkpoint's newestCommitTsXid:0\nTime of latest checkpoint:            Thu 23 Mar 2023 03:15:10 PM UTC\nFake LSN counter for unlogged rels:   0/3E8\nMinimum recovery ending location:     0/0\nMin recovery ending loc's timeline:   0\nBackup start location:                0/0\nBackup end location:                  0/0\nEnd-of-backup record required:        no\nwal_level setting:                    logical\nwal_log_hints setting:                on\nmax_connections setting:              100\nmax_worker_processes setting:         32\nmax_wal_senders setting:              10\nmax_prepared_xacts setting:           0\nmax_locks_per_xact setting:           64\ntrack_commit_timestamp setting:       off\nMaximum data alignment:               8\nDatabase block size:                  8192\nBlocks per segment of large relation: 131072\nWAL block size:                       8192\nBytes per WAL segment:                16777216\nMaximum length of identifiers:        64\nMaximum columns in an index:          32\nMaximum size of a TOAST chunk:        1996\nSize of a large-object chunk:         2048\nDate/time type storage:               64-bit integers\nFloat8 argument passing:              by value\nData page checksum version:           0\nMock authentication nonce:            b7f2f04197c763627732f064e0e1fca36c334973d9441ff8e49c207f6cd5a38f\n","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"Starting up pg_rewind","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"]}
{"level":"info","ts":"2023-03-23T15:18:37Z","logger":"pg_rewind","msg":"pg_rewind: error: restore_command is not set in the target cluster","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:37Z","msg":"Failed to execute pg_rewind","logging_pod":"cluster-example-1","options":["-P","--source-server","host=cluster-example-rw user=streaming_replica port=5432 sslkey=/controller/certificates/streaming_replica.key sslcert=/controller/certificates/streaming_replica.crt sslrootcert=/controller/certificates/server-ca.crt application_name=cluster-example-1 sslmode=verify-ca dbname=postgres","--target-pgdata","/var/lib/postgresql/data/pgdata","--restore-target-wal"],"error":"exit status 1","stacktrace":"github.com/cloudnative-pg/cloudnative-pg/pkg/management/log.(*logger).Error\n\tpkg/management/log/log.go:128\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/log.Error\n\tpkg/management/log/log.go:166\ngithub.com/cloudnative-pg/cloudnative-pg/pkg/management/postgres.(*Instance).Rewind\n\tpkg/management/postgres/instance.go:783\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).verifyPgDataCoherenceForPrimary\n\tinternal/management/controller/instance_startup.go:235\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).initialize\n\tinternal/management/controller/instance_controller.go:327\ngithub.com/cloudnative-pg/cloudnative-pg/internal/management/controller.(*InstanceReconciler).Reconcile\n\tinternal/management/controller/instance_controller.go:141\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Reconcile\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:122\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:323\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"pg_rewind failed, starting the server to complete the crash recovery","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"271a01bb-b8f4-4236-a473-fefb23c64fc2","uuid":"fc5778e2-c98d-11ed-9303-9a717ac2e08d","logging_pod":"cluster-example-1","err":"error executing pg_rewind: exit status 1"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"Waiting for server to complete crash recovery","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:37Z","msg":"Starting up instance","logging_pod":"cluster-example-1","pgdata":"/var/lib/postgresql/data/pgdata","options":["start","-w","-D","/var/lib/postgresql/data/pgdata","-o","-c port=5432 -c unix_socket_directories=/controller/run","-t 40000000"]}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"waiting for server to start....2023-03-23 15:18:38.027 GMT [198] LOG:  starting PostgreSQL 15.2 (Debian 15.2-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.027 GMT [198] LOG:  listening on IPv6 address \"::1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.027 GMT [198] LOG:  listening on IPv4 address \"127.0.0.1\", port 5432","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.048 GMT [198] LOG:  listening on Unix socket \"/controller/run/.s.PGSQL.5432\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] CONTEXT:  line 6 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] CONTEXT:  line 7 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] LOG:  hostssl record cannot match because SSL is disabled","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] HINT:  Set ssl = on in postgresql.conf.","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.054 GMT [198] CONTEXT:  line 8 of configuration file \"/var/lib/postgresql/data/pgdata/pg_hba.conf\"","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.070 GMT [201] LOG:  database system was shut down at 2023-03-23 15:15:11 GMT","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.070 GMT [201] LOG:  invalid primary checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.070 GMT [201] PANIC:  could not locate a valid checkpoint record","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.176 GMT [198] LOG:  startup process (PID 201) was terminated by signal 6: Aborted","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.177 GMT [198] LOG:  aborting startup due to startup process failure","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"2023-03-23 15:18:38.177 GMT [198] LOG:  database system is shut down","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"pg_ctl: could not start server","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":"Examine the log output.","pipe":"stderr","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","logger":"pg_ctl","msg":" stopped waiting","pipe":"stdout","logging_pod":"cluster-example-1"}
{"level":"info","ts":"2023-03-23T15:18:38Z","msg":"Exited log pipe","fileName":"/controller/log/postgres.csv","logging_pod":"cluster-example-1"}
{"level":"error","ts":"2023-03-23T15:18:38Z","msg":"Reconciler error","controller":"cluster","controllerGroup":"postgresql.cnpg.io","controllerKind":"Cluster","Cluster":{"name":"cluster-example","namespace":"default"},"namespace":"default","name":"cluster-example","reconcileID":"271a01bb-b8f4-4236-a473-fefb23c64fc2","error":"while activating instance: error starting PostgreSQL instance: exit status 1","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:329\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:274\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func2.2\n\tpkg/mod/sigs.k8s.io/controller-runtime@v0.14.5/pkg/internal/controller/controller.go:235"}
{"level":"info","ts":"2023-03-23T15:18:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:38Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:40Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:41Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:42Z","msg":"Readiness probe failing","logging_pod":"cluster-example-1","err":"instance is not ready yet"}
{"level":"info","ts":"2023-03-23T15:18:42Z","msg":"Liveness probe failing","logging_pod":"cluster-example-1","err":"could not establish connection"}
{"level":"info","ts":"2023-03-23T15:18:42Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:43Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:44Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:45Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:46Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:48Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:49Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
{"level":"info","ts":"2023-03-23T15:18:50Z","msg":"Instance status probe failing","logging_pod":"cluster-example-1","err":"failed to connect to `host=/controller/run user=postgres database=postgres`: dial error (dial unix /controller/run/.s.PGSQL.5432: connect: no such file or directory)"}
